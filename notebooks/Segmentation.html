
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Segmentation &#8212; spatialproteomics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9a5d0dcb"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/Segmentation';</script>
    <link rel="icon" href="../_static/spatialproteomics_icon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Image Processing" href="ImageProcessing.html" />
    <link rel="prev" title="Plotting" href="Plotting.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/spatialproteomics_logo_light.png" class="logo__image only-light" alt="spatialproteomics - Home"/>
    <script>document.write(`<img src="../_static/spatialproteomics_logo_dark.png" class="logo__image only-dark" alt="spatialproteomics - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExampleWorkflow.html">Example Workflow with spatialproteomics</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExampleWorkflowSpatialdata.html">Example Workflow with spatialproteomics and spatialdata</a></li>
<li class="toctree-l1"><a class="reference internal" href="Plotting.html">Plotting</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ImageProcessing.html">Image Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="CellTypePrediction.html">Cell Type Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Neighborhoods.html">Neighborhood Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Interoperability.html">Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="DownstreamAnalysis.html">Downstream Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Interactivity.html">Interactivity with napari</a></li>
<li class="toctree-l1"><a class="reference internal" href="Customizability.html">Customizability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slicing.html">Subselecting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="ArtifactRemoval.html">Interactive Removal of Artifacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultiTechnologyIntegration.html">Integration of Multiple Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../preprocessing.html">The preprocessing (<code class="code docutils literal notranslate"><span class="pre">pp</span></code>) accessor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../label.html">The label (<code class="code docutils literal notranslate"><span class="pre">la</span></code>) accessor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../neighborhood.html">The neighborhood (<code class="code docutils literal notranslate"><span class="pre">nh</span></code>) accessor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plot.html">The plot (<code class="code docutils literal notranslate"><span class="pre">pl</span></code>) accessor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tool.html">The tool (<code class="code docutils literal notranslate"><span class="pre">tl</span></code>) accessor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../image_container.html">The image container</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/Segmentation.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Segmentation</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Whole-Cell-Segmentation-with-Cellpose">Whole-Cell Segmentation with Cellpose</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Whole-Cell-Segmentation-with-Mesmer">Whole-Cell Segmentation with Mesmer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Nuclear-Segmentation-with-StarDist">Nuclear Segmentation with StarDist</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Segmenting-Multiple-Channels-with-Cellpose">Segmenting Multiple Channels with Cellpose</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Fine-Tuning-Cellpose">Fine-Tuning Cellpose</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Merging-Segmentation-Masks-from-Different-Layers">Merging Segmentation Masks from Different Layers</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Segmentation">
<h1>Segmentation<a class="headerlink" href="#Segmentation" title="Link to this heading">#</a></h1>
<p>Segmentation describes the process of finding cells in an image. This can be done either on the nucleus or on whole cell level. Spatialproteomics provides wrappers for StarDist, mesmer and cellpose.</p>
<p>If you want to follow along with this tutorial, you can download the data <a class="reference external" href="https://oc.embl.de/index.php/s/XzEa9po1tjiDzzJ">here</a>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">reload_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">spatialproteomics</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># loading the input data</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_zarr</span><span class="p">(</span><span class="s2">&quot;../../data/segmentation_example.zarr&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pp</span><span class="p">[</span><span class="mi">1000</span><span class="p">:</span><span class="mi">1300</span><span class="p">,</span> <span class="mi">1000</span><span class="p">:</span><span class="mi">1300</span><span class="p">]</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">drop_layers</span><span class="p">(</span><span class="n">keep</span><span class="o">=</span><span class="s2">&quot;_image&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># checking what the object initially looks like</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 367kB
Dimensions:   (channels: 4, y: 301, x: 301)
Coordinates:
  * channels  (channels) &lt;U11 176B &#x27;DAPI&#x27; &#x27;Na/K ATPase&#x27; &#x27;CD68&#x27; &#x27;CD11c&#x27;
  * x         (x) int64 2kB 1000 1001 1002 1003 1004 ... 1297 1298 1299 1300
  * y         (y) int64 2kB 1000 1001 1002 1003 1004 ... 1297 1298 1299 1300
Data variables:
    _image    (channels, y, x) uint8 362kB dask.array&lt;chunksize=(4, 301, 301), meta=np.ndarray&gt;</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c857ef91-7258-4768-bbea-de61c41cfa50' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c857ef91-7258-4768-bbea-de61c41cfa50' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>channels</span>: 4</li><li><span class='xr-has-index'>y</span>: 301</li><li><span class='xr-has-index'>x</span>: 301</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-0673aae7-9513-45e5-a15c-9906f0d18ae8' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0673aae7-9513-45e5-a15c-9906f0d18ae8' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>channels</span></div><div class='xr-var-dims'>(channels)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>&#x27;DAPI&#x27; &#x27;Na/K ATPase&#x27; &#x27;CD68&#x27; &#x27;CD11c&#x27;</div><input id='attrs-d8840111-2a47-4b03-a3ca-c311fa0a8cf2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d8840111-2a47-4b03-a3ca-c311fa0a8cf2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0ce116cd-a58c-4c1f-b0a0-7aa47b672ab7' class='xr-var-data-in' type='checkbox'><label for='data-0ce116cd-a58c-4c1f-b0a0-7aa47b672ab7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;DAPI&#x27;, &#x27;Na/K ATPase&#x27;, &#x27;CD68&#x27;, &#x27;CD11c&#x27;], dtype=&#x27;&lt;U11&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-2579c193-5459-4fe4-92f6-a952e9a4d279' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2579c193-5459-4fe4-92f6-a952e9a4d279' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0f6a7a0c-2e47-4afa-9791-27c0b0f580fc' class='xr-var-data-in' type='checkbox'><label for='data-0f6a7a0c-2e47-4afa-9791-27c0b0f580fc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-c4bde135-dcdb-4578-ac6e-f3e5f7b9392b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c4bde135-dcdb-4578-ac6e-f3e5f7b9392b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d81d60af-3c0a-4e73-a4ce-30526c1128fc' class='xr-var-data-in' type='checkbox'><label for='data-d81d60af-3c0a-4e73-a4ce-30526c1128fc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6a4c7e0e-2915-4cdd-910f-181cd6b4b5bd' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6a4c7e0e-2915-4cdd-910f-181cd6b4b5bd' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>_image</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4, 301, 301), meta=np.ndarray&gt;</div><input id='attrs-92bb8c47-1854-422f-8e25-83077d71a5f0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-92bb8c47-1854-422f-8e25-83077d71a5f0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-54d439d7-2390-4bdf-a6d7-5592a90beec1' class='xr-var-data-in' type='checkbox'><label for='data-54d439d7-2390-4bdf-a6d7-5592a90beec1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 353.91 kiB </td>
                        <td> 353.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4, 301, 301) </td>
                        <td> (4, 301, 301) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 1 chunks in 3 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> uint8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="195" height="185" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="25" y2="15" style="stroke-width:2" />
  <line x1="10" y1="120" x2="25" y2="135" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2" />
  <line x1="25" y1="15" x2="25" y2="135" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 25.77971986703342,15.779719867033421 25.77971986703342,135.7797198670334 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="25" y1="15" x2="145" y2="15" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="25" y2="15" style="stroke-width:2" />
  <line x1="130" y1="0" x2="145" y2="15" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 145.7797198670334,15.779719867033421 25.77971986703342,15.779719867033421" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="25" y1="15" x2="145" y2="15" style="stroke-width:2" />
  <line x1="25" y1="135" x2="145" y2="135" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="25" y1="15" x2="25" y2="135" style="stroke-width:2" />
  <line x1="145" y1="15" x2="145" y2="135" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="25.77971986703342,15.779719867033421 145.7797198670334,15.779719867033421 145.7797198670334,135.7797198670334 25.77971986703342,135.7797198670334" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="85.779720" y="155.779720" font-size="1.0rem" font-weight="100" text-anchor="middle" >301</text>
  <text x="165.779720" y="75.779720" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,165.779720,75.779720)">301</text>
  <text x="7.889860" y="147.889860" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,7.889860,147.889860)">4</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-c2dca482-b899-48f7-8843-d70273bbda1f' class='xr-section-summary-in' type='checkbox'  ><label for='section-c2dca482-b899-48f7-8843-d70273bbda1f' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>channels</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c1384b58-46ad-403b-86c5-0b00536e0bff' class='xr-index-data-in' type='checkbox'/><label for='index-c1384b58-46ad-403b-86c5-0b00536e0bff' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;DAPI&#x27;, &#x27;Na/K ATPase&#x27;, &#x27;CD68&#x27;, &#x27;CD11c&#x27;], dtype=&#x27;object&#x27;, name=&#x27;channels&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f1dd8528-1d74-4160-8b9d-95227dff7ae7' class='xr-index-data-in' type='checkbox'/><label for='index-f1dd8528-1d74-4160-8b9d-95227dff7ae7' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1b8a1d76-fa28-4177-9078-76b94a5b3bba' class='xr-index-data-in' type='checkbox'/><label for='index-1b8a1d76-fa28-4177-9078-76b94a5b3bba' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;, length=301))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-4cc9ba69-0fcf-42ef-ba39-6afb021a0bba' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-4cc9ba69-0fcf-42ef-ba39-6afb021a0bba' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<section id="Whole-Cell-Segmentation-with-Cellpose">
<h2>Whole-Cell Segmentation with Cellpose<a class="headerlink" href="#Whole-Cell-Segmentation-with-Cellpose" title="Link to this heading">#</a></h2>
<p>Cellpose can either perform segmentation on nuclei only or on whole cells, using a nuclear and a membrane marker. In this dataset, we have DAPI as a nuclear marker and Na/K ATPase as a membrane marker. In cellpose 4, the order of these does not matter. You can refer to the <a class="reference external" href="https://cellpose.readthedocs.io/en/latest/settings.html">cellpose documentation</a> for more details to tweak the model.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># running the segmentation on the selected markers</span>
<span class="n">ds_cellpose</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">cellpose</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Na/K ATPase&quot;</span><span class="p">,</span> <span class="s2">&quot;DAPI&quot;</span><span class="p">])</span>
<span class="n">ds_cellpose</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Welcome to CellposeSAM, cellpose v
cellpose version:       4.0.4
platform:               linux
python version:         3.10.0
torch version:          2.7.0+cu126! The neural network component of
CPSAM is much larger than in previous versions and CPU excution is slow.
We encourage users to use GPU/MPS if available.


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Neither TORCH CUDA nor MPS version not installed/working.
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; loading model /home/meyerben/.cellpose/models/cpsam
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 555kB
Dimensions:        (channels: 4, y: 301, x: 301, cells: 282, features: 2)
Coordinates:
  * channels       (channels) &lt;U11 176B &#x27;DAPI&#x27; &#x27;Na/K ATPase&#x27; &#x27;CD68&#x27; &#x27;CD11c&#x27;
  * x              (x) int64 2kB 1000 1001 1002 1003 ... 1297 1298 1299 1300
  * y              (y) int64 2kB 1000 1001 1002 1003 ... 1297 1298 1299 1300
  * cells          (cells) int64 2kB 1 2 3 4 5 6 7 ... 277 278 279 280 281 282
  * features       (features) &lt;U10 80B &#x27;centroid-0&#x27; &#x27;centroid-1&#x27;
Data variables:
    _image         (channels, y, x) uint8 362kB dask.array&lt;chunksize=(4, 301, 301), meta=np.ndarray&gt;
    _segmentation  (y, x) uint16 181kB 0 0 0 0 0 0 0 ... 274 274 274 274 274 0
    _obs           (cells, features) float64 5kB 1.009e+03 ... 1.004e+03</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-fba32db4-4c09-4400-bc54-6031e5cb1493' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-fba32db4-4c09-4400-bc54-6031e5cb1493' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>channels</span>: 4</li><li><span class='xr-has-index'>y</span>: 301</li><li><span class='xr-has-index'>x</span>: 301</li><li><span class='xr-has-index'>cells</span>: 282</li><li><span class='xr-has-index'>features</span>: 2</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-7c5680aa-6834-47d7-9379-8cb8416923a3' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7c5680aa-6834-47d7-9379-8cb8416923a3' class='xr-section-summary' >Coordinates: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>channels</span></div><div class='xr-var-dims'>(channels)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>&#x27;DAPI&#x27; &#x27;Na/K ATPase&#x27; &#x27;CD68&#x27; &#x27;CD11c&#x27;</div><input id='attrs-119bcb32-650f-4bbd-b275-66b08f2b56fc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-119bcb32-650f-4bbd-b275-66b08f2b56fc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-33d171ed-6599-4fde-a400-9f96a0773cdd' class='xr-var-data-in' type='checkbox'><label for='data-33d171ed-6599-4fde-a400-9f96a0773cdd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;DAPI&#x27;, &#x27;Na/K ATPase&#x27;, &#x27;CD68&#x27;, &#x27;CD11c&#x27;], dtype=&#x27;&lt;U11&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-14070e6a-4d23-4822-a780-da452b8c8ecb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-14070e6a-4d23-4822-a780-da452b8c8ecb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d6f5342e-b77f-46fa-b7ad-41f9a176edcd' class='xr-var-data-in' type='checkbox'><label for='data-d6f5342e-b77f-46fa-b7ad-41f9a176edcd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-43f9f652-52ba-4b52-8eed-0b271f715d1c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-43f9f652-52ba-4b52-8eed-0b271f715d1c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-98fa7380-e2f8-4184-987f-f5d3bce1bd92' class='xr-var-data-in' type='checkbox'><label for='data-98fa7380-e2f8-4184-987f-f5d3bce1bd92' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>cells</span></div><div class='xr-var-dims'>(cells)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 2 3 4 5 6 ... 278 279 280 281 282</div><input id='attrs-8b7ea783-3803-42a0-9340-c4befe83ce97' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8b7ea783-3803-42a0-9340-c4befe83ce97' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c4f5bfd5-0bbe-44f5-99ac-49fe880bf3a1' class='xr-var-data-in' type='checkbox'><label for='data-c4f5bfd5-0bbe-44f5-99ac-49fe880bf3a1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  1,   2,   3, ..., 280, 281, 282])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>features</span></div><div class='xr-var-dims'>(features)</div><div class='xr-var-dtype'>&lt;U10</div><div class='xr-var-preview xr-preview'>&#x27;centroid-0&#x27; &#x27;centroid-1&#x27;</div><input id='attrs-c5505b78-0ec7-4d81-9aa4-a6caeec9b0ca' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c5505b78-0ec7-4d81-9aa4-a6caeec9b0ca' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-86a45b38-9d70-4ef0-8fe0-43c1d3e48ec6' class='xr-var-data-in' type='checkbox'><label for='data-86a45b38-9d70-4ef0-8fe0-43c1d3e48ec6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;centroid-0&#x27;, &#x27;centroid-1&#x27;], dtype=&#x27;&lt;U10&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9ba06b7f-2d9e-4caf-8611-e676e6dd01bd' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9ba06b7f-2d9e-4caf-8611-e676e6dd01bd' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>_image</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4, 301, 301), meta=np.ndarray&gt;</div><input id='attrs-9c9d6c0a-547b-4baf-b237-ea7c56f77fcf' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9c9d6c0a-547b-4baf-b237-ea7c56f77fcf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f58f8bcd-1db6-4169-8b6c-c0055b4b2170' class='xr-var-data-in' type='checkbox'><label for='data-f58f8bcd-1db6-4169-8b6c-c0055b4b2170' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 353.91 kiB </td>
                        <td> 353.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4, 301, 301) </td>
                        <td> (4, 301, 301) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 1 chunks in 3 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> uint8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="195" height="185" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="25" y2="15" style="stroke-width:2" />
  <line x1="10" y1="120" x2="25" y2="135" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2" />
  <line x1="25" y1="15" x2="25" y2="135" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 25.77971986703342,15.779719867033421 25.77971986703342,135.7797198670334 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="25" y1="15" x2="145" y2="15" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="25" y2="15" style="stroke-width:2" />
  <line x1="130" y1="0" x2="145" y2="15" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 145.7797198670334,15.779719867033421 25.77971986703342,15.779719867033421" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="25" y1="15" x2="145" y2="15" style="stroke-width:2" />
  <line x1="25" y1="135" x2="145" y2="135" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="25" y1="15" x2="25" y2="135" style="stroke-width:2" />
  <line x1="145" y1="15" x2="145" y2="135" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="25.77971986703342,15.779719867033421 145.7797198670334,15.779719867033421 145.7797198670334,135.7797198670334 25.77971986703342,135.7797198670334" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="85.779720" y="155.779720" font-size="1.0rem" font-weight="100" text-anchor="middle" >301</text>
  <text x="165.779720" y="75.779720" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,165.779720,75.779720)">301</text>
  <text x="7.889860" y="147.889860" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,7.889860,147.889860)">4</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_segmentation</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 ... 274 274 274 274 0</div><input id='attrs-167d8a28-2c94-47bb-8c45-1e042e3386c5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-167d8a28-2c94-47bb-8c45-1e042e3386c5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a3b9f82-c632-45ab-96e2-88b43f6e8271' class='xr-var-data-in' type='checkbox'><label for='data-2a3b9f82-c632-45ab-96e2-88b43f6e8271' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[  0,   0,   0, ...,   0,   0,   0],
       [  0,   7,   7, ...,   0,   0,   0],
       [  7,   7,   7, ...,   0,   0,   0],
       ...,
       [282, 282, 282, ..., 274, 274, 274],
       [282, 282, 282, ..., 274, 274, 274],
       [  0, 282, 282, ..., 274, 274,   0]], dtype=uint16)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_obs</span></div><div class='xr-var-dims'>(cells, features)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.009e+03 1.034e+03 ... 1.004e+03</div><input id='attrs-0bed8c74-8f0d-437f-8758-6d4ee3f2cb4f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0bed8c74-8f0d-437f-8758-6d4ee3f2cb4f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e7a8e15-1187-44c8-a4d9-146818faa7bf' class='xr-var-data-in' type='checkbox'><label for='data-8e7a8e15-1187-44c8-a4d9-146818faa7bf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1009.28635347, 1033.62863535],
       [1002.88297872, 1052.08510638],
       [1002.69565217, 1119.98550725],
       [1008.30645161, 1147.65322581],
       [1007.98666667, 1166.32      ],
       [1010.42238267, 1239.40794224],
       [1005.78095238, 1011.31904762],
       [1008.93782383, 1074.98963731],
       [1007.86026201, 1088.93449782],
       [1006.01470588, 1102.83823529],
       [1005.06766917, 1133.19548872],
       [1010.28865979, 1191.29209622],
       [1010.35164835, 1223.22252747],
       [1011.34302326, 1111.85465116],
       [1013.37894737, 1002.8       ],
       [1014.34920635, 1052.8452381 ],
       [1015.03414634, 1253.36097561],
       [1020.11764706, 1295.32579186],
       [1020.75838926, 1012.95973154],
       [1022.45753425, 1132.96438356],
...
       [1280.15525114, 1030.88584475],
       [1278.08252427, 1142.54368932],
       [1282.37430168, 1294.72067039],
       [1287.35249042, 1040.94252874],
       [1288.16710183, 1121.46997389],
       [1284.69230769, 1179.19615385],
       [1290.06213018, 1198.52071006],
       [1285.74242424, 1259.94949495],
       [1292.59197324, 1137.22073579],
       [1291.77003484, 1238.07665505],
       [1292.81764706, 1217.44117647],
       [1293.82229965, 1288.03484321],
       [1292.3923445 , 1011.55502392],
       [1293.        , 1056.57679181],
       [1293.55378486, 1096.22310757],
       [1295.55367232, 1074.46327684],
       [1295.37391304, 1251.37391304],
       [1295.61261261, 1264.09009009],
       [1295.57615894, 1182.47682119],
       [1296.87301587, 1003.73015873]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-db01040c-be83-4eef-b954-61cb96411db4' class='xr-section-summary-in' type='checkbox'  ><label for='section-db01040c-be83-4eef-b954-61cb96411db4' class='xr-section-summary' >Indexes: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>channels</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1ed24e3e-9da9-41a6-a6bb-5b090ba72bec' class='xr-index-data-in' type='checkbox'/><label for='index-1ed24e3e-9da9-41a6-a6bb-5b090ba72bec' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;DAPI&#x27;, &#x27;Na/K ATPase&#x27;, &#x27;CD68&#x27;, &#x27;CD11c&#x27;], dtype=&#x27;object&#x27;, name=&#x27;channels&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1ca206a7-acff-4815-b3a8-ac1df253e4c7' class='xr-index-data-in' type='checkbox'/><label for='index-1ca206a7-acff-4815-b3a8-ac1df253e4c7' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-045439ba-28d1-414b-b966-6e03712d0752' class='xr-index-data-in' type='checkbox'/><label for='index-045439ba-28d1-414b-b966-6e03712d0752' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>cells</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-7815fdd4-a507-4374-a0f7-7ac90a18725a' class='xr-index-data-in' type='checkbox'/><label for='index-7815fdd4-a507-4374-a0f7-7ac90a18725a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,
       ...
       273, 274, 275, 276, 277, 278, 279, 280, 281, 282],
      dtype=&#x27;int64&#x27;, name=&#x27;cells&#x27;, length=282))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>features</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-fb99f34b-9d9b-4817-8afa-6745efdd254d' class='xr-index-data-in' type='checkbox'/><label for='index-fb99f34b-9d9b-4817-8afa-6745efdd254d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;centroid-0&#x27;, &#x27;centroid-1&#x27;], dtype=&#x27;object&#x27;, name=&#x27;features&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1da40ea8-c679-4fae-bc3e-ed69abdf0079' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-1da40ea8-c679-4fae-bc3e-ed69abdf0079' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># for plotting, we subselect the two markers from before, but you could also show the other markers</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_cellpose</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;Na/K ATPase&quot;</span><span class="p">,</span> <span class="s2">&quot;DAPI&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">([</span><span class="s2">&quot;deepskyblue&quot;</span><span class="p">,</span> <span class="s2">&quot;gold&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_7_0.png" src="../_images/notebooks_Segmentation_7_0.png" />
</div>
</div>
</section>
<section id="Whole-Cell-Segmentation-with-Mesmer">
<h2>Whole-Cell Segmentation with Mesmer<a class="headerlink" href="#Whole-Cell-Segmentation-with-Mesmer" title="Link to this heading">#</a></h2>
<p>You can also do the same thing with mesmer. Note however that mesmer expects the channels to be in the order <code class="docutils literal notranslate"><span class="pre">[nuclear,</span> <span class="pre">membrane]</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># running mesmer</span>
<span class="n">ds_mesmer</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">mesmer</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;Na/K ATPase&quot;</span><span class="p">])</span>
<span class="c1"># plotting the result</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;Na/K ATPase&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">([</span><span class="s2">&quot;gold&quot;</span><span class="p">,</span> <span class="s2">&quot;deepskyblue&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2025-05-27 07:51:35.308013: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library &#39;libcudart.so.11.0&#39;; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /g/huber/users/meyerben/.conda/envs/tmp_env_3/lib/python3.10/site-packages/cv2/../../lib64:
2025-05-27 07:51:35.308044: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
Checking for cached data
Checking MultiplexSegmentation-9.tar.gz against provided file_hash...
MultiplexSegmentation-9.tar.gz with hash a1dfbce2594f927b9112f23a0a1739e0 already available.
Extracting /home/meyerben/.deepcell/models/MultiplexSegmentation-9.tar.gz
Successfully extracted /home/meyerben/.deepcell/models/MultiplexSegmentation-9.tar.gz into /home/meyerben/.deepcell/models
2025-05-27 07:51:40.668279: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library &#39;libcuda.so.1&#39;; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /g/huber/users/meyerben/.conda/envs/tmp_env_3/lib/python3.10/site-packages/cv2/../../lib64:
2025-05-27 07:51:40.668310: W tensorflow/stream_executor/cuda/cuda_driver.cc:269] failed call to cuInit: UNKNOWN ERROR (303)
2025-05-27 07:51:40.668331: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (jupyter-meyerben): /proc/driver/nvidia/version does not exist
2025-05-27 07:51:40.668577: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
No training configuration found in save file, so the model was *not* compiled. Compile it manually.
Converting image dtype to float
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_9_1.png" src="../_images/notebooks_Segmentation_9_1.png" />
</div>
</div>
</section>
<section id="Nuclear-Segmentation-with-StarDist">
<h2>Nuclear Segmentation with StarDist<a class="headerlink" href="#Nuclear-Segmentation-with-StarDist" title="Link to this heading">#</a></h2>
<p>Sometimes, you may not have a membrane stain available. In that case, you can perform nuclear segmentation. This is possible with cellpose (simply call <code class="docutils literal notranslate"><span class="pre">tl.cellpose(channel='DAPI')</span></code>) and StarDist. The following shows and example of how StarDist performs on such a task.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># running stardist</span>
<span class="n">ds_stardist</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">stardist</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;DAPI&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Found model &#39;2D_versatile_fluo&#39; for &#39;StarDist2D&#39;.
Loading network weights from &#39;weights_best.h5&#39;.
Loading thresholds from &#39;thresholds.json&#39;.
Using default values: prob_thresh=0.479071, nms_thresh=0.3.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|██████████| 144/144 [00:08&lt;00:00, 16.26it/s]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plotting the segmentation</span>
<span class="n">fix</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_12_0.png" src="../_images/notebooks_Segmentation_12_0.png" />
</div>
</div>
<p>You might have noticed that StarDist tends to segment a lot of small cells. Let’s look at the distribution of cell sizes, and then remove all nuclei under a certain size.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># getting a histogram of the areas</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">add_observations</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">get_layer_as_df</span><span class="p">()[</span><span class="s2">&quot;area&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_14_0.png" src="../_images/notebooks_Segmentation_14_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># removing cells which have an area below 50 pixels</span>
<span class="n">ds_stardist</span> <span class="o">=</span> <span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">add_observations</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">filter_by_obs</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1"># plotting the segmentation</span>
<span class="n">fix</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_15_0.png" src="../_images/notebooks_Segmentation_15_0.png" />
</div>
</div>
<p>To try to capture full cells, we can now grow the segmentation masks, e. g. by two pixels into each direction. If two masks collide, the masks will stop growing into that direction.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_stardist_grown</span> <span class="o">=</span> <span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">grow_cells</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Mask growing requires recalculation of the observations. All features other than the centroids will be removed and should be recalculated with pp.add_observations().
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plotting the segmentation</span>
<span class="n">fix</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_stardist</span><span class="o">.</span><span class="n">pp</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_stardist_grown</span><span class="o">.</span><span class="n">pp</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;StarDist segmentation&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Grown masks&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_18_0.png" src="../_images/notebooks_Segmentation_18_0.png" />
</div>
</div>
</section>
<section id="Segmenting-Multiple-Channels-with-Cellpose">
<h2>Segmenting Multiple Channels with Cellpose<a class="headerlink" href="#Segmenting-Multiple-Channels-with-Cellpose" title="Link to this heading">#</a></h2>
<p>Next to predicting nuclei or whole cells using a universal membrane marker, you can also use cellpose to try to predict other cell types. In the following, we will see how we can use cellpose to segment three different channels independently and then merge the segmentation masks into one mask. There are some hyperparameters in cellpose which can help the prediction.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># segmenting on DAPI, CD11c (dendritic cells) and CD68 (macrophages)</span>
<span class="c1"># note that when merging the masks later, the order matters (channels take precedence by position in the subsetting)</span>
<span class="c1"># so you should have your largest cells first, and then go down by expected size</span>

<span class="c1"># we use the channel_settings argument here to tell cellpose that it should perform an independent segmentation for each of our markers</span>
<span class="c1"># without this argument, cellpose-sam would try to segment the cells based on all three markers combined</span>
<span class="n">ds_cellpose</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;CD11c&quot;</span><span class="p">,</span> <span class="s2">&quot;CD68&quot;</span><span class="p">,</span> <span class="s2">&quot;DAPI&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">cellpose</span><span class="p">(</span><span class="n">key_added</span><span class="o">=</span><span class="s2">&quot;_cellpose_segmentation&quot;</span><span class="p">,</span> <span class="n">channel_settings</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Neither TORCH CUDA nor MPS version not installed/working.
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; loading model /home/meyerben/.cellpose/models/cpsam
Performing independent segmentation on all markers. If you want to perform joint segmentation, please set the channel_settings argument appropriately.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_cellpose</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 820kB
Dimensions:                 (channels: 3, y: 301, x: 301)
Coordinates:
  * channels                (channels) &lt;U11 132B &#x27;CD11c&#x27; &#x27;CD68&#x27; &#x27;DAPI&#x27;
  * x                       (x) int64 2kB 1000 1001 1002 1003 ... 1298 1299 1300
  * y                       (y) int64 2kB 1000 1001 1002 1003 ... 1298 1299 1300
Data variables:
    _image                  (channels, y, x) uint8 272kB dask.array&lt;chunksize=(3, 301, 301), meta=np.ndarray&gt;
    _cellpose_segmentation  (channels, y, x) uint16 544kB 0 0 0 ... 309 309 309</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-39b1f7ef-6b73-4012-baca-622a43ffe557' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-39b1f7ef-6b73-4012-baca-622a43ffe557' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>channels</span>: 3</li><li><span class='xr-has-index'>y</span>: 301</li><li><span class='xr-has-index'>x</span>: 301</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-6ead861f-e0d4-4f98-b49c-070065002b89' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6ead861f-e0d4-4f98-b49c-070065002b89' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>channels</span></div><div class='xr-var-dims'>(channels)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>&#x27;CD11c&#x27; &#x27;CD68&#x27; &#x27;DAPI&#x27;</div><input id='attrs-787b079e-9ffe-422b-b4b2-beb943e0ea66' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-787b079e-9ffe-422b-b4b2-beb943e0ea66' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b09627cc-f0ff-4b1c-ab18-602ada52b1aa' class='xr-var-data-in' type='checkbox'><label for='data-b09627cc-f0ff-4b1c-ab18-602ada52b1aa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;CD11c&#x27;, &#x27;CD68&#x27;, &#x27;DAPI&#x27;], dtype=&#x27;&lt;U11&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-180bba44-9416-4c46-a652-854b5f6396df' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-180bba44-9416-4c46-a652-854b5f6396df' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9da72065-4bd9-4f23-bc58-11a9e9a3c64c' class='xr-var-data-in' type='checkbox'><label for='data-9da72065-4bd9-4f23-bc58-11a9e9a3c64c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-cecfb03e-a1d0-4e89-813d-8131531e5e6c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cecfb03e-a1d0-4e89-813d-8131531e5e6c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-30d3a9c2-2b3d-4a31-88b0-7c1191b710db' class='xr-var-data-in' type='checkbox'><label for='data-30d3a9c2-2b3d-4a31-88b0-7c1191b710db' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-be9703ea-0e9f-41b2-bbaf-2d85c247bffa' class='xr-section-summary-in' type='checkbox'  checked><label for='section-be9703ea-0e9f-41b2-bbaf-2d85c247bffa' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>_image</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(3, 301, 301), meta=np.ndarray&gt;</div><input id='attrs-5324d69b-5890-40bb-988e-1f2d6bfc0f1f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5324d69b-5890-40bb-988e-1f2d6bfc0f1f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d8cbc504-34dd-4278-aa7d-4f93b01370d4' class='xr-var-data-in' type='checkbox'><label for='data-d8cbc504-34dd-4278-aa7d-4f93b01370d4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 265.43 kiB </td>
                        <td> 265.43 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (3, 301, 301) </td>
                        <td> (3, 301, 301) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 1 chunks in 4 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> uint8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="194" height="184" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="10" y1="120" x2="24" y2="134" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2" />
  <line x1="24" y1="14" x2="24" y2="134" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 24.9485979497544,14.948597949754403 24.9485979497544,134.9485979497544 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="130" y1="0" x2="144" y2="14" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 144.9485979497544,14.948597949754403 24.9485979497544,14.948597949754403" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />
  <line x1="24" y1="134" x2="144" y2="134" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="24" y1="14" x2="24" y2="134" style="stroke-width:2" />
  <line x1="144" y1="14" x2="144" y2="134" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="24.9485979497544,14.948597949754403 144.9485979497544,14.948597949754403 144.9485979497544,134.9485979497544 24.9485979497544,134.9485979497544" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="84.948598" y="154.948598" font-size="1.0rem" font-weight="100" text-anchor="middle" >301</text>
  <text x="164.948598" y="74.948598" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,164.948598,74.948598)">301</text>
  <text x="7.474299" y="147.474299" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,7.474299,147.474299)">3</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_cellpose_segmentation</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 ... 309 309 309 309 309</div><input id='attrs-a481f239-c00e-4a24-b3cf-a4b6590d1dfd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a481f239-c00e-4a24-b3cf-a4b6590d1dfd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-feab2f78-7e62-4a5b-b37a-6fd82c43e140' class='xr-var-data-in' type='checkbox'><label for='data-feab2f78-7e62-4a5b-b37a-6fd82c43e140' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]],

       [[  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]],

       [[  0,   1,   1, ...,  15,  15,   0],
        [  1,   1,   1, ...,  15,  15,  15],
        [  1,   1,   1, ...,  15,  15,  15],
        ...,
        [314, 314, 314, ..., 309, 309, 309],
        [314, 314, 314, ..., 309, 309, 309],
        [  0, 314, 314, ..., 309, 309, 309]]], dtype=uint16)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6f5bd5e4-0dff-4808-8509-e2b4929b8336' class='xr-section-summary-in' type='checkbox'  ><label for='section-6f5bd5e4-0dff-4808-8509-e2b4929b8336' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>channels</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-eec9e870-c14c-4671-9efb-905998249d0a' class='xr-index-data-in' type='checkbox'/><label for='index-eec9e870-c14c-4671-9efb-905998249d0a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;CD11c&#x27;, &#x27;CD68&#x27;, &#x27;DAPI&#x27;], dtype=&#x27;object&#x27;, name=&#x27;channels&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-ea9c685d-8d8f-4b0b-bfc7-c5b887b72cea' class='xr-index-data-in' type='checkbox'/><label for='index-ea9c685d-8d8f-4b0b-bfc7-c5b887b72cea' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-ed01743a-f17d-462d-afe3-98aef98c9206' class='xr-index-data-in' type='checkbox'/><label for='index-ed01743a-f17d-462d-afe3-98aef98c9206' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;, length=301))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d8941062-9662-4635-874d-33d41275b668' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d8941062-9662-4635-874d-33d41275b668' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># merging the segmentation masks into a single segmentation</span>
<span class="c1"># the threshold value tells you how much of a mask need to overlap for the less important one to be removed</span>
<span class="n">ds_cellpose_merged</span> <span class="o">=</span> <span class="n">ds_cellpose</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">merge_segmentation</span><span class="p">(</span>
    <span class="s2">&quot;_cellpose_segmentation&quot;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Dendritic Cell&quot;</span><span class="p">,</span> <span class="s2">&quot;Macrophage&quot;</span><span class="p">,</span> <span class="s2">&quot;Lymphocyte&quot;</span><span class="p">],</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.8</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_cellpose_merged</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 1MB
Dimensions:                 (channels: 3, y: 301, x: 301)
Coordinates:
  * channels                (channels) &lt;U11 132B &#x27;CD11c&#x27; &#x27;CD68&#x27; &#x27;DAPI&#x27;
  * x                       (x) int64 2kB 1000 1001 1002 1003 ... 1298 1299 1300
  * y                       (y) int64 2kB 1000 1001 1002 1003 ... 1298 1299 1300
Data variables:
    _image                  (channels, y, x) uint8 272kB dask.array&lt;chunksize=(3, 301, 301), meta=np.ndarray&gt;
    _cellpose_segmentation  (channels, y, x) uint16 544kB 0 0 0 ... 309 309 309
    _merged_segmentation    (y, x) uint16 181kB 0 11 11 11 ... 301 301 301 301</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-94a87096-24d5-4909-a9ef-903143da1112' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-94a87096-24d5-4909-a9ef-903143da1112' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>channels</span>: 3</li><li><span class='xr-has-index'>y</span>: 301</li><li><span class='xr-has-index'>x</span>: 301</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-86212d0b-1eb9-4dd4-a02d-74573dd85930' class='xr-section-summary-in' type='checkbox'  checked><label for='section-86212d0b-1eb9-4dd4-a02d-74573dd85930' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>channels</span></div><div class='xr-var-dims'>(channels)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>&#x27;CD11c&#x27; &#x27;CD68&#x27; &#x27;DAPI&#x27;</div><input id='attrs-42f96465-0dce-4a10-aef7-a614b850b7e1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-42f96465-0dce-4a10-aef7-a614b850b7e1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d2f23151-17fe-4259-9f70-25213d2e681d' class='xr-var-data-in' type='checkbox'><label for='data-d2f23151-17fe-4259-9f70-25213d2e681d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;CD11c&#x27;, &#x27;CD68&#x27;, &#x27;DAPI&#x27;], dtype=&#x27;&lt;U11&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-825aa82b-323b-4d5d-b3df-2796ed54a179' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-825aa82b-323b-4d5d-b3df-2796ed54a179' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d1550bf8-cacc-4531-92bd-74e45bb45b48' class='xr-var-data-in' type='checkbox'><label for='data-d1550bf8-cacc-4531-92bd-74e45bb45b48' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-e9a94c5d-4e0c-4b21-9bbe-67c3a1ce1c37' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e9a94c5d-4e0c-4b21-9bbe-67c3a1ce1c37' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-13f3037c-4769-439a-a2e2-f959065b4761' class='xr-var-data-in' type='checkbox'><label for='data-13f3037c-4769-439a-a2e2-f959065b4761' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0069cb0c-556a-4003-b965-10011f77bbb2' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0069cb0c-556a-4003-b965-10011f77bbb2' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>_image</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(3, 301, 301), meta=np.ndarray&gt;</div><input id='attrs-b8fd9184-b053-4c83-9497-76e1cfdd749a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b8fd9184-b053-4c83-9497-76e1cfdd749a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9bbae2ec-3055-4cf2-b847-0592ee735fd1' class='xr-var-data-in' type='checkbox'><label for='data-9bbae2ec-3055-4cf2-b847-0592ee735fd1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 265.43 kiB </td>
                        <td> 265.43 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (3, 301, 301) </td>
                        <td> (3, 301, 301) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 1 chunks in 4 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> uint8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="194" height="184" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="10" y1="120" x2="24" y2="134" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2" />
  <line x1="24" y1="14" x2="24" y2="134" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 24.9485979497544,14.948597949754403 24.9485979497544,134.9485979497544 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="130" y1="0" x2="144" y2="14" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 144.9485979497544,14.948597949754403 24.9485979497544,14.948597949754403" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />
  <line x1="24" y1="134" x2="144" y2="134" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="24" y1="14" x2="24" y2="134" style="stroke-width:2" />
  <line x1="144" y1="14" x2="144" y2="134" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="24.9485979497544,14.948597949754403 144.9485979497544,14.948597949754403 144.9485979497544,134.9485979497544 24.9485979497544,134.9485979497544" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="84.948598" y="154.948598" font-size="1.0rem" font-weight="100" text-anchor="middle" >301</text>
  <text x="164.948598" y="74.948598" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,164.948598,74.948598)">301</text>
  <text x="7.474299" y="147.474299" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,7.474299,147.474299)">3</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_cellpose_segmentation</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 ... 309 309 309 309 309</div><input id='attrs-ac61e5c1-a296-49b8-a7e6-610e516e027e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ac61e5c1-a296-49b8-a7e6-610e516e027e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-655422f5-d5a0-4046-a1e0-5d3d844790da' class='xr-var-data-in' type='checkbox'><label for='data-655422f5-d5a0-4046-a1e0-5d3d844790da' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]],

       [[  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]],

       [[  0,   1,   1, ...,  15,  15,   0],
        [  1,   1,   1, ...,  15,  15,  15],
        [  1,   1,   1, ...,  15,  15,  15],
        ...,
        [314, 314, 314, ..., 309, 309, 309],
        [314, 314, 314, ..., 309, 309, 309],
        [  0, 314, 314, ..., 309, 309, 309]]], dtype=uint16)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_merged_segmentation</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 11 11 11 11 ... 301 301 301 301</div><input id='attrs-707e4db5-062c-4114-a716-ea93af4aeec7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-707e4db5-062c-4114-a716-ea93af4aeec7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-045f1e55-e6a2-4926-bc95-aa4b9d4f273b' class='xr-var-data-in' type='checkbox'><label for='data-045f1e55-e6a2-4926-bc95-aa4b9d4f273b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>1 :</span></dt><dd>Dendritic Cell</dd><dt><span>2 :</span></dt><dd>Dendritic Cell</dd><dt><span>3 :</span></dt><dd>Dendritic Cell</dd><dt><span>4 :</span></dt><dd>Dendritic Cell</dd><dt><span>5 :</span></dt><dd>Dendritic Cell</dd><dt><span>6 :</span></dt><dd>Macrophage</dd><dt><span>7 :</span></dt><dd>Macrophage</dd><dt><span>8 :</span></dt><dd>Macrophage</dd><dt><span>9 :</span></dt><dd>Macrophage</dd><dt><span>10 :</span></dt><dd>Macrophage</dd><dt><span>11 :</span></dt><dd>Lymphocyte</dd><dt><span>12 :</span></dt><dd>Lymphocyte</dd><dt><span>13 :</span></dt><dd>Lymphocyte</dd><dt><span>14 :</span></dt><dd>Lymphocyte</dd><dt><span>15 :</span></dt><dd>Lymphocyte</dd><dt><span>16 :</span></dt><dd>Lymphocyte</dd><dt><span>17 :</span></dt><dd>Lymphocyte</dd><dt><span>18 :</span></dt><dd>Lymphocyte</dd><dt><span>19 :</span></dt><dd>Lymphocyte</dd><dt><span>20 :</span></dt><dd>Lymphocyte</dd><dt><span>21 :</span></dt><dd>Lymphocyte</dd><dt><span>22 :</span></dt><dd>Lymphocyte</dd><dt><span>23 :</span></dt><dd>Lymphocyte</dd><dt><span>24 :</span></dt><dd>Lymphocyte</dd><dt><span>25 :</span></dt><dd>Lymphocyte</dd><dt><span>26 :</span></dt><dd>Lymphocyte</dd><dt><span>27 :</span></dt><dd>Lymphocyte</dd><dt><span>28 :</span></dt><dd>Lymphocyte</dd><dt><span>29 :</span></dt><dd>Lymphocyte</dd><dt><span>30 :</span></dt><dd>Lymphocyte</dd><dt><span>31 :</span></dt><dd>Lymphocyte</dd><dt><span>32 :</span></dt><dd>Lymphocyte</dd><dt><span>33 :</span></dt><dd>Lymphocyte</dd><dt><span>34 :</span></dt><dd>Lymphocyte</dd><dt><span>35 :</span></dt><dd>Lymphocyte</dd><dt><span>36 :</span></dt><dd>Lymphocyte</dd><dt><span>37 :</span></dt><dd>Lymphocyte</dd><dt><span>38 :</span></dt><dd>Lymphocyte</dd><dt><span>39 :</span></dt><dd>Lymphocyte</dd><dt><span>40 :</span></dt><dd>Lymphocyte</dd><dt><span>41 :</span></dt><dd>Lymphocyte</dd><dt><span>42 :</span></dt><dd>Lymphocyte</dd><dt><span>43 :</span></dt><dd>Lymphocyte</dd><dt><span>44 :</span></dt><dd>Lymphocyte</dd><dt><span>45 :</span></dt><dd>Lymphocyte</dd><dt><span>46 :</span></dt><dd>Lymphocyte</dd><dt><span>47 :</span></dt><dd>Lymphocyte</dd><dt><span>48 :</span></dt><dd>Lymphocyte</dd><dt><span>49 :</span></dt><dd>Lymphocyte</dd><dt><span>50 :</span></dt><dd>Lymphocyte</dd><dt><span>51 :</span></dt><dd>Lymphocyte</dd><dt><span>52 :</span></dt><dd>Lymphocyte</dd><dt><span>53 :</span></dt><dd>Lymphocyte</dd><dt><span>54 :</span></dt><dd>Lymphocyte</dd><dt><span>55 :</span></dt><dd>Lymphocyte</dd><dt><span>56 :</span></dt><dd>Lymphocyte</dd><dt><span>57 :</span></dt><dd>Lymphocyte</dd><dt><span>58 :</span></dt><dd>Lymphocyte</dd><dt><span>59 :</span></dt><dd>Lymphocyte</dd><dt><span>60 :</span></dt><dd>Lymphocyte</dd><dt><span>61 :</span></dt><dd>Lymphocyte</dd><dt><span>62 :</span></dt><dd>Lymphocyte</dd><dt><span>63 :</span></dt><dd>Lymphocyte</dd><dt><span>64 :</span></dt><dd>Lymphocyte</dd><dt><span>65 :</span></dt><dd>Lymphocyte</dd><dt><span>66 :</span></dt><dd>Lymphocyte</dd><dt><span>67 :</span></dt><dd>Lymphocyte</dd><dt><span>68 :</span></dt><dd>Lymphocyte</dd><dt><span>69 :</span></dt><dd>Lymphocyte</dd><dt><span>70 :</span></dt><dd>Lymphocyte</dd><dt><span>71 :</span></dt><dd>Lymphocyte</dd><dt><span>72 :</span></dt><dd>Lymphocyte</dd><dt><span>73 :</span></dt><dd>Lymphocyte</dd><dt><span>74 :</span></dt><dd>Lymphocyte</dd><dt><span>75 :</span></dt><dd>Lymphocyte</dd><dt><span>76 :</span></dt><dd>Lymphocyte</dd><dt><span>77 :</span></dt><dd>Lymphocyte</dd><dt><span>78 :</span></dt><dd>Lymphocyte</dd><dt><span>79 :</span></dt><dd>Lymphocyte</dd><dt><span>80 :</span></dt><dd>Lymphocyte</dd><dt><span>81 :</span></dt><dd>Lymphocyte</dd><dt><span>82 :</span></dt><dd>Lymphocyte</dd><dt><span>83 :</span></dt><dd>Lymphocyte</dd><dt><span>84 :</span></dt><dd>Lymphocyte</dd><dt><span>85 :</span></dt><dd>Lymphocyte</dd><dt><span>86 :</span></dt><dd>Lymphocyte</dd><dt><span>87 :</span></dt><dd>Lymphocyte</dd><dt><span>88 :</span></dt><dd>Lymphocyte</dd><dt><span>89 :</span></dt><dd>Lymphocyte</dd><dt><span>90 :</span></dt><dd>Lymphocyte</dd><dt><span>91 :</span></dt><dd>Lymphocyte</dd><dt><span>92 :</span></dt><dd>Lymphocyte</dd><dt><span>93 :</span></dt><dd>Lymphocyte</dd><dt><span>94 :</span></dt><dd>Lymphocyte</dd><dt><span>95 :</span></dt><dd>Lymphocyte</dd><dt><span>96 :</span></dt><dd>Lymphocyte</dd><dt><span>97 :</span></dt><dd>Lymphocyte</dd><dt><span>98 :</span></dt><dd>Lymphocyte</dd><dt><span>99 :</span></dt><dd>Lymphocyte</dd><dt><span>100 :</span></dt><dd>Lymphocyte</dd><dt><span>101 :</span></dt><dd>Lymphocyte</dd><dt><span>102 :</span></dt><dd>Lymphocyte</dd><dt><span>103 :</span></dt><dd>Lymphocyte</dd><dt><span>104 :</span></dt><dd>Lymphocyte</dd><dt><span>105 :</span></dt><dd>Lymphocyte</dd><dt><span>106 :</span></dt><dd>Lymphocyte</dd><dt><span>107 :</span></dt><dd>Lymphocyte</dd><dt><span>108 :</span></dt><dd>Lymphocyte</dd><dt><span>109 :</span></dt><dd>Lymphocyte</dd><dt><span>110 :</span></dt><dd>Lymphocyte</dd><dt><span>111 :</span></dt><dd>Lymphocyte</dd><dt><span>112 :</span></dt><dd>Lymphocyte</dd><dt><span>113 :</span></dt><dd>Lymphocyte</dd><dt><span>114 :</span></dt><dd>Lymphocyte</dd><dt><span>115 :</span></dt><dd>Lymphocyte</dd><dt><span>116 :</span></dt><dd>Lymphocyte</dd><dt><span>117 :</span></dt><dd>Lymphocyte</dd><dt><span>118 :</span></dt><dd>Lymphocyte</dd><dt><span>119 :</span></dt><dd>Lymphocyte</dd><dt><span>120 :</span></dt><dd>Lymphocyte</dd><dt><span>121 :</span></dt><dd>Lymphocyte</dd><dt><span>122 :</span></dt><dd>Lymphocyte</dd><dt><span>123 :</span></dt><dd>Lymphocyte</dd><dt><span>124 :</span></dt><dd>Lymphocyte</dd><dt><span>125 :</span></dt><dd>Lymphocyte</dd><dt><span>126 :</span></dt><dd>Lymphocyte</dd><dt><span>127 :</span></dt><dd>Lymphocyte</dd><dt><span>128 :</span></dt><dd>Lymphocyte</dd><dt><span>129 :</span></dt><dd>Lymphocyte</dd><dt><span>130 :</span></dt><dd>Lymphocyte</dd><dt><span>131 :</span></dt><dd>Lymphocyte</dd><dt><span>132 :</span></dt><dd>Lymphocyte</dd><dt><span>133 :</span></dt><dd>Lymphocyte</dd><dt><span>134 :</span></dt><dd>Lymphocyte</dd><dt><span>135 :</span></dt><dd>Lymphocyte</dd><dt><span>136 :</span></dt><dd>Lymphocyte</dd><dt><span>137 :</span></dt><dd>Lymphocyte</dd><dt><span>138 :</span></dt><dd>Lymphocyte</dd><dt><span>139 :</span></dt><dd>Lymphocyte</dd><dt><span>140 :</span></dt><dd>Lymphocyte</dd><dt><span>141 :</span></dt><dd>Lymphocyte</dd><dt><span>142 :</span></dt><dd>Lymphocyte</dd><dt><span>143 :</span></dt><dd>Lymphocyte</dd><dt><span>144 :</span></dt><dd>Lymphocyte</dd><dt><span>145 :</span></dt><dd>Lymphocyte</dd><dt><span>146 :</span></dt><dd>Lymphocyte</dd><dt><span>147 :</span></dt><dd>Lymphocyte</dd><dt><span>148 :</span></dt><dd>Lymphocyte</dd><dt><span>149 :</span></dt><dd>Lymphocyte</dd><dt><span>150 :</span></dt><dd>Lymphocyte</dd><dt><span>151 :</span></dt><dd>Lymphocyte</dd><dt><span>152 :</span></dt><dd>Lymphocyte</dd><dt><span>153 :</span></dt><dd>Lymphocyte</dd><dt><span>154 :</span></dt><dd>Lymphocyte</dd><dt><span>155 :</span></dt><dd>Lymphocyte</dd><dt><span>156 :</span></dt><dd>Lymphocyte</dd><dt><span>157 :</span></dt><dd>Lymphocyte</dd><dt><span>158 :</span></dt><dd>Lymphocyte</dd><dt><span>159 :</span></dt><dd>Lymphocyte</dd><dt><span>160 :</span></dt><dd>Lymphocyte</dd><dt><span>161 :</span></dt><dd>Lymphocyte</dd><dt><span>162 :</span></dt><dd>Lymphocyte</dd><dt><span>163 :</span></dt><dd>Lymphocyte</dd><dt><span>164 :</span></dt><dd>Lymphocyte</dd><dt><span>165 :</span></dt><dd>Lymphocyte</dd><dt><span>166 :</span></dt><dd>Lymphocyte</dd><dt><span>167 :</span></dt><dd>Lymphocyte</dd><dt><span>168 :</span></dt><dd>Lymphocyte</dd><dt><span>169 :</span></dt><dd>Lymphocyte</dd><dt><span>170 :</span></dt><dd>Lymphocyte</dd><dt><span>171 :</span></dt><dd>Lymphocyte</dd><dt><span>172 :</span></dt><dd>Lymphocyte</dd><dt><span>173 :</span></dt><dd>Lymphocyte</dd><dt><span>174 :</span></dt><dd>Lymphocyte</dd><dt><span>175 :</span></dt><dd>Lymphocyte</dd><dt><span>176 :</span></dt><dd>Lymphocyte</dd><dt><span>177 :</span></dt><dd>Lymphocyte</dd><dt><span>178 :</span></dt><dd>Lymphocyte</dd><dt><span>179 :</span></dt><dd>Lymphocyte</dd><dt><span>180 :</span></dt><dd>Lymphocyte</dd><dt><span>181 :</span></dt><dd>Lymphocyte</dd><dt><span>182 :</span></dt><dd>Lymphocyte</dd><dt><span>183 :</span></dt><dd>Lymphocyte</dd><dt><span>184 :</span></dt><dd>Lymphocyte</dd><dt><span>185 :</span></dt><dd>Lymphocyte</dd><dt><span>186 :</span></dt><dd>Lymphocyte</dd><dt><span>187 :</span></dt><dd>Lymphocyte</dd><dt><span>188 :</span></dt><dd>Lymphocyte</dd><dt><span>189 :</span></dt><dd>Lymphocyte</dd><dt><span>190 :</span></dt><dd>Lymphocyte</dd><dt><span>191 :</span></dt><dd>Lymphocyte</dd><dt><span>192 :</span></dt><dd>Lymphocyte</dd><dt><span>193 :</span></dt><dd>Lymphocyte</dd><dt><span>194 :</span></dt><dd>Lymphocyte</dd><dt><span>195 :</span></dt><dd>Lymphocyte</dd><dt><span>196 :</span></dt><dd>Lymphocyte</dd><dt><span>197 :</span></dt><dd>Lymphocyte</dd><dt><span>198 :</span></dt><dd>Lymphocyte</dd><dt><span>199 :</span></dt><dd>Lymphocyte</dd><dt><span>200 :</span></dt><dd>Lymphocyte</dd><dt><span>201 :</span></dt><dd>Lymphocyte</dd><dt><span>202 :</span></dt><dd>Lymphocyte</dd><dt><span>203 :</span></dt><dd>Lymphocyte</dd><dt><span>204 :</span></dt><dd>Lymphocyte</dd><dt><span>205 :</span></dt><dd>Lymphocyte</dd><dt><span>206 :</span></dt><dd>Lymphocyte</dd><dt><span>207 :</span></dt><dd>Lymphocyte</dd><dt><span>208 :</span></dt><dd>Lymphocyte</dd><dt><span>209 :</span></dt><dd>Lymphocyte</dd><dt><span>210 :</span></dt><dd>Lymphocyte</dd><dt><span>211 :</span></dt><dd>Lymphocyte</dd><dt><span>212 :</span></dt><dd>Lymphocyte</dd><dt><span>213 :</span></dt><dd>Lymphocyte</dd><dt><span>214 :</span></dt><dd>Lymphocyte</dd><dt><span>215 :</span></dt><dd>Lymphocyte</dd><dt><span>216 :</span></dt><dd>Lymphocyte</dd><dt><span>217 :</span></dt><dd>Lymphocyte</dd><dt><span>218 :</span></dt><dd>Lymphocyte</dd><dt><span>219 :</span></dt><dd>Lymphocyte</dd><dt><span>220 :</span></dt><dd>Lymphocyte</dd><dt><span>221 :</span></dt><dd>Lymphocyte</dd><dt><span>222 :</span></dt><dd>Lymphocyte</dd><dt><span>223 :</span></dt><dd>Lymphocyte</dd><dt><span>224 :</span></dt><dd>Lymphocyte</dd><dt><span>225 :</span></dt><dd>Lymphocyte</dd><dt><span>226 :</span></dt><dd>Lymphocyte</dd><dt><span>227 :</span></dt><dd>Lymphocyte</dd><dt><span>228 :</span></dt><dd>Lymphocyte</dd><dt><span>229 :</span></dt><dd>Lymphocyte</dd><dt><span>230 :</span></dt><dd>Lymphocyte</dd><dt><span>231 :</span></dt><dd>Lymphocyte</dd><dt><span>232 :</span></dt><dd>Lymphocyte</dd><dt><span>233 :</span></dt><dd>Lymphocyte</dd><dt><span>234 :</span></dt><dd>Lymphocyte</dd><dt><span>235 :</span></dt><dd>Lymphocyte</dd><dt><span>236 :</span></dt><dd>Lymphocyte</dd><dt><span>237 :</span></dt><dd>Lymphocyte</dd><dt><span>238 :</span></dt><dd>Lymphocyte</dd><dt><span>239 :</span></dt><dd>Lymphocyte</dd><dt><span>240 :</span></dt><dd>Lymphocyte</dd><dt><span>241 :</span></dt><dd>Lymphocyte</dd><dt><span>242 :</span></dt><dd>Lymphocyte</dd><dt><span>243 :</span></dt><dd>Lymphocyte</dd><dt><span>244 :</span></dt><dd>Lymphocyte</dd><dt><span>245 :</span></dt><dd>Lymphocyte</dd><dt><span>246 :</span></dt><dd>Lymphocyte</dd><dt><span>247 :</span></dt><dd>Lymphocyte</dd><dt><span>248 :</span></dt><dd>Lymphocyte</dd><dt><span>249 :</span></dt><dd>Lymphocyte</dd><dt><span>250 :</span></dt><dd>Lymphocyte</dd><dt><span>251 :</span></dt><dd>Lymphocyte</dd><dt><span>252 :</span></dt><dd>Lymphocyte</dd><dt><span>253 :</span></dt><dd>Lymphocyte</dd><dt><span>254 :</span></dt><dd>Lymphocyte</dd><dt><span>255 :</span></dt><dd>Lymphocyte</dd><dt><span>256 :</span></dt><dd>Lymphocyte</dd><dt><span>257 :</span></dt><dd>Lymphocyte</dd><dt><span>258 :</span></dt><dd>Lymphocyte</dd><dt><span>259 :</span></dt><dd>Lymphocyte</dd><dt><span>260 :</span></dt><dd>Lymphocyte</dd><dt><span>261 :</span></dt><dd>Lymphocyte</dd><dt><span>262 :</span></dt><dd>Lymphocyte</dd><dt><span>263 :</span></dt><dd>Lymphocyte</dd><dt><span>264 :</span></dt><dd>Lymphocyte</dd><dt><span>265 :</span></dt><dd>Lymphocyte</dd><dt><span>266 :</span></dt><dd>Lymphocyte</dd><dt><span>267 :</span></dt><dd>Lymphocyte</dd><dt><span>268 :</span></dt><dd>Lymphocyte</dd><dt><span>269 :</span></dt><dd>Lymphocyte</dd><dt><span>270 :</span></dt><dd>Lymphocyte</dd><dt><span>271 :</span></dt><dd>Lymphocyte</dd><dt><span>272 :</span></dt><dd>Lymphocyte</dd><dt><span>273 :</span></dt><dd>Lymphocyte</dd><dt><span>274 :</span></dt><dd>Lymphocyte</dd><dt><span>275 :</span></dt><dd>Lymphocyte</dd><dt><span>276 :</span></dt><dd>Lymphocyte</dd><dt><span>277 :</span></dt><dd>Lymphocyte</dd><dt><span>278 :</span></dt><dd>Lymphocyte</dd><dt><span>279 :</span></dt><dd>Lymphocyte</dd><dt><span>280 :</span></dt><dd>Lymphocyte</dd><dt><span>281 :</span></dt><dd>Lymphocyte</dd><dt><span>282 :</span></dt><dd>Lymphocyte</dd><dt><span>283 :</span></dt><dd>Lymphocyte</dd><dt><span>284 :</span></dt><dd>Lymphocyte</dd><dt><span>285 :</span></dt><dd>Lymphocyte</dd><dt><span>286 :</span></dt><dd>Lymphocyte</dd><dt><span>287 :</span></dt><dd>Lymphocyte</dd><dt><span>288 :</span></dt><dd>Lymphocyte</dd><dt><span>289 :</span></dt><dd>Lymphocyte</dd><dt><span>290 :</span></dt><dd>Lymphocyte</dd><dt><span>291 :</span></dt><dd>Lymphocyte</dd><dt><span>292 :</span></dt><dd>Lymphocyte</dd><dt><span>293 :</span></dt><dd>Lymphocyte</dd><dt><span>294 :</span></dt><dd>Lymphocyte</dd><dt><span>295 :</span></dt><dd>Lymphocyte</dd><dt><span>296 :</span></dt><dd>Lymphocyte</dd><dt><span>297 :</span></dt><dd>Lymphocyte</dd><dt><span>298 :</span></dt><dd>Lymphocyte</dd><dt><span>299 :</span></dt><dd>Lymphocyte</dd><dt><span>300 :</span></dt><dd>Lymphocyte</dd><dt><span>301 :</span></dt><dd>Lymphocyte</dd><dt><span>302 :</span></dt><dd>Lymphocyte</dd><dt><span>303 :</span></dt><dd>Lymphocyte</dd><dt><span>304 :</span></dt><dd>Lymphocyte</dd><dt><span>305 :</span></dt><dd>Lymphocyte</dd><dt><span>306 :</span></dt><dd>Lymphocyte</dd></dl></div><div class='xr-var-data'><pre>array([[  0,  11,  11, ...,  25,  25,   0],
       [ 11,  11,  11, ...,  25,  25,  25],
       [ 11,  11,  11, ...,  25,  25,  25],
       ...,
       [306, 306, 306, ..., 301, 301, 301],
       [306, 306, 306, ..., 301, 301, 301],
       [  0, 306, 306, ..., 301, 301, 301]], dtype=uint16)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bbc1bbfc-1055-4e9f-bf28-9cf5bc91ef22' class='xr-section-summary-in' type='checkbox'  ><label for='section-bbc1bbfc-1055-4e9f-bf28-9cf5bc91ef22' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>channels</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-8ec39929-f422-438b-8263-42610b60a86c' class='xr-index-data-in' type='checkbox'/><label for='index-8ec39929-f422-438b-8263-42610b60a86c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;CD11c&#x27;, &#x27;CD68&#x27;, &#x27;DAPI&#x27;], dtype=&#x27;object&#x27;, name=&#x27;channels&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1188752d-c820-4380-b57f-49d4290d8d77' class='xr-index-data-in' type='checkbox'/><label for='index-1188752d-c820-4380-b57f-49d4290d8d77' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c532e8c0-f216-47d2-9558-9df8a5c40472' class='xr-index-data-in' type='checkbox'/><label for='index-c532e8c0-f216-47d2-9558-9df8a5c40472' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;, length=301))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-7349efc0-e6dd-412e-86dc-4acd2c27bf4c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-7349efc0-e6dd-412e-86dc-4acd2c27bf4c' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># adding the merged segmentation as the main segmentation in the object</span>
<span class="c1"># this is done so that we can visualize the result with pl.show(render_segmentation=True), without needing to specify which segmentation we want to show</span>
<span class="n">ds_cellpose_merged</span> <span class="o">=</span> <span class="n">ds_cellpose_merged</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">add_segmentation</span><span class="p">(</span><span class="s2">&quot;_merged_segmentation&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_cellpose_merged</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 1MB
Dimensions:                 (labels: 3, la_props: 2, channels: 3, x: 301,
                             y: 301, cells: 306, features: 3)
Coordinates:
  * labels                  (labels) int64 24B 1 2 3
  * la_props                (la_props) &lt;U6 48B &#x27;_color&#x27; &#x27;_name&#x27;
  * channels                (channels) &lt;U11 132B &#x27;CD11c&#x27; &#x27;CD68&#x27; &#x27;DAPI&#x27;
  * x                       (x) int64 2kB 1000 1001 1002 1003 ... 1298 1299 1300
  * y                       (y) int64 2kB 1000 1001 1002 1003 ... 1298 1299 1300
  * cells                   (cells) int64 2kB 1 2 3 4 5 ... 302 303 304 305 306
  * features                (features) &lt;U10 120B &#x27;_labels&#x27; ... &#x27;centroid-1&#x27;
Data variables:
    _la_properties          (labels, la_props) object 48B &#x27;#A3C8C9&#x27; ... &#x27;Macr...
    _image                  (channels, y, x) uint8 272kB dask.array&lt;chunksize=(3, 301, 301), meta=np.ndarray&gt;
    _cellpose_segmentation  (channels, y, x) uint16 544kB 0 0 0 ... 309 309 309
    _merged_segmentation    (y, x) uint16 181kB 0 11 11 11 ... 301 301 301 301
    _obs                    (cells, features) float64 7kB 1.0 ... 1.004e+03
    _segmentation           (y, x) uint16 181kB 0 11 11 11 ... 301 301 301 301</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-ea292ef9-a76c-4fe3-8235-40056a7d2064' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-ea292ef9-a76c-4fe3-8235-40056a7d2064' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>labels</span>: 3</li><li><span class='xr-has-index'>la_props</span>: 2</li><li><span class='xr-has-index'>channels</span>: 3</li><li><span class='xr-has-index'>x</span>: 301</li><li><span class='xr-has-index'>y</span>: 301</li><li><span class='xr-has-index'>cells</span>: 306</li><li><span class='xr-has-index'>features</span>: 3</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-1ce719cc-6fac-46fd-be54-11638f57d651' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1ce719cc-6fac-46fd-be54-11638f57d651' class='xr-section-summary' >Coordinates: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>labels</span></div><div class='xr-var-dims'>(labels)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 2 3</div><input id='attrs-f8b34c77-8170-442c-92fe-53d27ed7f6c1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f8b34c77-8170-442c-92fe-53d27ed7f6c1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bcb178ee-696e-4ed8-892d-ae12b5dc55db' class='xr-var-data-in' type='checkbox'><label for='data-bcb178ee-696e-4ed8-892d-ae12b5dc55db' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 2, 3])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>la_props</span></div><div class='xr-var-dims'>(la_props)</div><div class='xr-var-dtype'>&lt;U6</div><div class='xr-var-preview xr-preview'>&#x27;_color&#x27; &#x27;_name&#x27;</div><input id='attrs-7452bc5e-d16f-49a1-8194-25ae473cccff' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7452bc5e-d16f-49a1-8194-25ae473cccff' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b58c253f-197a-47b4-b62f-2f5bc3fdccf4' class='xr-var-data-in' type='checkbox'><label for='data-b58c253f-197a-47b4-b62f-2f5bc3fdccf4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;_color&#x27;, &#x27;_name&#x27;], dtype=&#x27;&lt;U6&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>channels</span></div><div class='xr-var-dims'>(channels)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>&#x27;CD11c&#x27; &#x27;CD68&#x27; &#x27;DAPI&#x27;</div><input id='attrs-d04e66bd-619b-4016-9a0f-6398bd92a801' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d04e66bd-619b-4016-9a0f-6398bd92a801' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f44cfb47-02d8-4734-9aa2-ee4a7b246621' class='xr-var-data-in' type='checkbox'><label for='data-f44cfb47-02d8-4734-9aa2-ee4a7b246621' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;CD11c&#x27;, &#x27;CD68&#x27;, &#x27;DAPI&#x27;], dtype=&#x27;&lt;U11&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-8279e64d-baa2-4efe-aa6d-bbb174a85be5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8279e64d-baa2-4efe-aa6d-bbb174a85be5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-86b03e4a-7089-48fa-9f35-ac5457aa2195' class='xr-var-data-in' type='checkbox'><label for='data-86b03e4a-7089-48fa-9f35-ac5457aa2195' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-bbb42392-f013-4e43-adb2-79c488331bf2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-bbb42392-f013-4e43-adb2-79c488331bf2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-75e95a77-51b0-4a8a-bc3d-0f4fb93c84b3' class='xr-var-data-in' type='checkbox'><label for='data-75e95a77-51b0-4a8a-bc3d-0f4fb93c84b3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>cells</span></div><div class='xr-var-dims'>(cells)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 2 3 4 5 6 ... 302 303 304 305 306</div><input id='attrs-7b596c84-3a3e-4ab3-a894-4108bd2722c6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7b596c84-3a3e-4ab3-a894-4108bd2722c6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-eca66458-6868-4d4a-9281-59ad3726bf53' class='xr-var-data-in' type='checkbox'><label for='data-eca66458-6868-4d4a-9281-59ad3726bf53' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  1,   2,   3, ..., 304, 305, 306])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>features</span></div><div class='xr-var-dims'>(features)</div><div class='xr-var-dtype'>&lt;U10</div><div class='xr-var-preview xr-preview'>&#x27;_labels&#x27; &#x27;centroid-0&#x27; &#x27;centroid-1&#x27;</div><input id='attrs-5d9c2a54-4657-441b-80a0-63aaca5ddf04' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5d9c2a54-4657-441b-80a0-63aaca5ddf04' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3d7004e1-ccfe-4690-a39e-6617923c782f' class='xr-var-data-in' type='checkbox'><label for='data-3d7004e1-ccfe-4690-a39e-6617923c782f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;_labels&#x27;, &#x27;centroid-0&#x27;, &#x27;centroid-1&#x27;], dtype=&#x27;&lt;U10&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-5efd85cf-343c-4082-9be3-816d2734eb43' class='xr-section-summary-in' type='checkbox'  checked><label for='section-5efd85cf-343c-4082-9be3-816d2734eb43' class='xr-section-summary' >Data variables: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>_la_properties</span></div><div class='xr-var-dims'>(labels, la_props)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;#A3C8C9&#x27; ... &#x27;Macrophage&#x27;</div><input id='attrs-9383bb33-ffdf-47dd-8e1f-a36f550fe9ff' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9383bb33-ffdf-47dd-8e1f-a36f550fe9ff' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-55dcfe2c-cdd3-4822-9db0-595118f8bce0' class='xr-var-data-in' type='checkbox'><label for='data-55dcfe2c-cdd3-4822-9db0-595118f8bce0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[&#x27;#A3C8C9&#x27;, &#x27;Dendritic Cell&#x27;],
       [&#x27;#456648&#x27;, &#x27;Lymphocyte&#x27;],
       [&#x27;#61615A&#x27;, &#x27;Macrophage&#x27;]], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_image</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(3, 301, 301), meta=np.ndarray&gt;</div><input id='attrs-72cfdbb4-e000-4130-b577-55705dc6dccf' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-72cfdbb4-e000-4130-b577-55705dc6dccf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d1e2d809-49b2-4c83-8066-9210bc193f7c' class='xr-var-data-in' type='checkbox'><label for='data-d1e2d809-49b2-4c83-8066-9210bc193f7c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 265.43 kiB </td>
                        <td> 265.43 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (3, 301, 301) </td>
                        <td> (3, 301, 301) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 1 chunks in 4 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> uint8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="194" height="184" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="10" y1="120" x2="24" y2="134" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2" />
  <line x1="24" y1="14" x2="24" y2="134" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 24.9485979497544,14.948597949754403 24.9485979497544,134.9485979497544 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="130" y1="0" x2="144" y2="14" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 144.9485979497544,14.948597949754403 24.9485979497544,14.948597949754403" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />
  <line x1="24" y1="134" x2="144" y2="134" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="24" y1="14" x2="24" y2="134" style="stroke-width:2" />
  <line x1="144" y1="14" x2="144" y2="134" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="24.9485979497544,14.948597949754403 144.9485979497544,14.948597949754403 144.9485979497544,134.9485979497544 24.9485979497544,134.9485979497544" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="84.948598" y="154.948598" font-size="1.0rem" font-weight="100" text-anchor="middle" >301</text>
  <text x="164.948598" y="74.948598" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,164.948598,74.948598)">301</text>
  <text x="7.474299" y="147.474299" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,7.474299,147.474299)">3</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_cellpose_segmentation</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 ... 309 309 309 309 309</div><input id='attrs-2520fe1f-86ce-4c19-91a8-0b60b506aa38' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2520fe1f-86ce-4c19-91a8-0b60b506aa38' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e49b1b43-ddae-476d-a141-45a4e4e7e62b' class='xr-var-data-in' type='checkbox'><label for='data-e49b1b43-ddae-476d-a141-45a4e4e7e62b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]],

       [[  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]],

       [[  0,   1,   1, ...,  15,  15,   0],
        [  1,   1,   1, ...,  15,  15,  15],
        [  1,   1,   1, ...,  15,  15,  15],
        ...,
        [314, 314, 314, ..., 309, 309, 309],
        [314, 314, 314, ..., 309, 309, 309],
        [  0, 314, 314, ..., 309, 309, 309]]], dtype=uint16)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_merged_segmentation</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 11 11 11 11 ... 301 301 301 301</div><input id='attrs-69d15493-bc90-434a-a2e4-a79987ee0826' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-69d15493-bc90-434a-a2e4-a79987ee0826' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fef10a6e-c4e3-4c13-8dfe-9c40066d85d6' class='xr-var-data-in' type='checkbox'><label for='data-fef10a6e-c4e3-4c13-8dfe-9c40066d85d6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>1 :</span></dt><dd>Dendritic Cell</dd><dt><span>2 :</span></dt><dd>Dendritic Cell</dd><dt><span>3 :</span></dt><dd>Dendritic Cell</dd><dt><span>4 :</span></dt><dd>Dendritic Cell</dd><dt><span>5 :</span></dt><dd>Dendritic Cell</dd><dt><span>6 :</span></dt><dd>Macrophage</dd><dt><span>7 :</span></dt><dd>Macrophage</dd><dt><span>8 :</span></dt><dd>Macrophage</dd><dt><span>9 :</span></dt><dd>Macrophage</dd><dt><span>10 :</span></dt><dd>Macrophage</dd><dt><span>11 :</span></dt><dd>Lymphocyte</dd><dt><span>12 :</span></dt><dd>Lymphocyte</dd><dt><span>13 :</span></dt><dd>Lymphocyte</dd><dt><span>14 :</span></dt><dd>Lymphocyte</dd><dt><span>15 :</span></dt><dd>Lymphocyte</dd><dt><span>16 :</span></dt><dd>Lymphocyte</dd><dt><span>17 :</span></dt><dd>Lymphocyte</dd><dt><span>18 :</span></dt><dd>Lymphocyte</dd><dt><span>19 :</span></dt><dd>Lymphocyte</dd><dt><span>20 :</span></dt><dd>Lymphocyte</dd><dt><span>21 :</span></dt><dd>Lymphocyte</dd><dt><span>22 :</span></dt><dd>Lymphocyte</dd><dt><span>23 :</span></dt><dd>Lymphocyte</dd><dt><span>24 :</span></dt><dd>Lymphocyte</dd><dt><span>25 :</span></dt><dd>Lymphocyte</dd><dt><span>26 :</span></dt><dd>Lymphocyte</dd><dt><span>27 :</span></dt><dd>Lymphocyte</dd><dt><span>28 :</span></dt><dd>Lymphocyte</dd><dt><span>29 :</span></dt><dd>Lymphocyte</dd><dt><span>30 :</span></dt><dd>Lymphocyte</dd><dt><span>31 :</span></dt><dd>Lymphocyte</dd><dt><span>32 :</span></dt><dd>Lymphocyte</dd><dt><span>33 :</span></dt><dd>Lymphocyte</dd><dt><span>34 :</span></dt><dd>Lymphocyte</dd><dt><span>35 :</span></dt><dd>Lymphocyte</dd><dt><span>36 :</span></dt><dd>Lymphocyte</dd><dt><span>37 :</span></dt><dd>Lymphocyte</dd><dt><span>38 :</span></dt><dd>Lymphocyte</dd><dt><span>39 :</span></dt><dd>Lymphocyte</dd><dt><span>40 :</span></dt><dd>Lymphocyte</dd><dt><span>41 :</span></dt><dd>Lymphocyte</dd><dt><span>42 :</span></dt><dd>Lymphocyte</dd><dt><span>43 :</span></dt><dd>Lymphocyte</dd><dt><span>44 :</span></dt><dd>Lymphocyte</dd><dt><span>45 :</span></dt><dd>Lymphocyte</dd><dt><span>46 :</span></dt><dd>Lymphocyte</dd><dt><span>47 :</span></dt><dd>Lymphocyte</dd><dt><span>48 :</span></dt><dd>Lymphocyte</dd><dt><span>49 :</span></dt><dd>Lymphocyte</dd><dt><span>50 :</span></dt><dd>Lymphocyte</dd><dt><span>51 :</span></dt><dd>Lymphocyte</dd><dt><span>52 :</span></dt><dd>Lymphocyte</dd><dt><span>53 :</span></dt><dd>Lymphocyte</dd><dt><span>54 :</span></dt><dd>Lymphocyte</dd><dt><span>55 :</span></dt><dd>Lymphocyte</dd><dt><span>56 :</span></dt><dd>Lymphocyte</dd><dt><span>57 :</span></dt><dd>Lymphocyte</dd><dt><span>58 :</span></dt><dd>Lymphocyte</dd><dt><span>59 :</span></dt><dd>Lymphocyte</dd><dt><span>60 :</span></dt><dd>Lymphocyte</dd><dt><span>61 :</span></dt><dd>Lymphocyte</dd><dt><span>62 :</span></dt><dd>Lymphocyte</dd><dt><span>63 :</span></dt><dd>Lymphocyte</dd><dt><span>64 :</span></dt><dd>Lymphocyte</dd><dt><span>65 :</span></dt><dd>Lymphocyte</dd><dt><span>66 :</span></dt><dd>Lymphocyte</dd><dt><span>67 :</span></dt><dd>Lymphocyte</dd><dt><span>68 :</span></dt><dd>Lymphocyte</dd><dt><span>69 :</span></dt><dd>Lymphocyte</dd><dt><span>70 :</span></dt><dd>Lymphocyte</dd><dt><span>71 :</span></dt><dd>Lymphocyte</dd><dt><span>72 :</span></dt><dd>Lymphocyte</dd><dt><span>73 :</span></dt><dd>Lymphocyte</dd><dt><span>74 :</span></dt><dd>Lymphocyte</dd><dt><span>75 :</span></dt><dd>Lymphocyte</dd><dt><span>76 :</span></dt><dd>Lymphocyte</dd><dt><span>77 :</span></dt><dd>Lymphocyte</dd><dt><span>78 :</span></dt><dd>Lymphocyte</dd><dt><span>79 :</span></dt><dd>Lymphocyte</dd><dt><span>80 :</span></dt><dd>Lymphocyte</dd><dt><span>81 :</span></dt><dd>Lymphocyte</dd><dt><span>82 :</span></dt><dd>Lymphocyte</dd><dt><span>83 :</span></dt><dd>Lymphocyte</dd><dt><span>84 :</span></dt><dd>Lymphocyte</dd><dt><span>85 :</span></dt><dd>Lymphocyte</dd><dt><span>86 :</span></dt><dd>Lymphocyte</dd><dt><span>87 :</span></dt><dd>Lymphocyte</dd><dt><span>88 :</span></dt><dd>Lymphocyte</dd><dt><span>89 :</span></dt><dd>Lymphocyte</dd><dt><span>90 :</span></dt><dd>Lymphocyte</dd><dt><span>91 :</span></dt><dd>Lymphocyte</dd><dt><span>92 :</span></dt><dd>Lymphocyte</dd><dt><span>93 :</span></dt><dd>Lymphocyte</dd><dt><span>94 :</span></dt><dd>Lymphocyte</dd><dt><span>95 :</span></dt><dd>Lymphocyte</dd><dt><span>96 :</span></dt><dd>Lymphocyte</dd><dt><span>97 :</span></dt><dd>Lymphocyte</dd><dt><span>98 :</span></dt><dd>Lymphocyte</dd><dt><span>99 :</span></dt><dd>Lymphocyte</dd><dt><span>100 :</span></dt><dd>Lymphocyte</dd><dt><span>101 :</span></dt><dd>Lymphocyte</dd><dt><span>102 :</span></dt><dd>Lymphocyte</dd><dt><span>103 :</span></dt><dd>Lymphocyte</dd><dt><span>104 :</span></dt><dd>Lymphocyte</dd><dt><span>105 :</span></dt><dd>Lymphocyte</dd><dt><span>106 :</span></dt><dd>Lymphocyte</dd><dt><span>107 :</span></dt><dd>Lymphocyte</dd><dt><span>108 :</span></dt><dd>Lymphocyte</dd><dt><span>109 :</span></dt><dd>Lymphocyte</dd><dt><span>110 :</span></dt><dd>Lymphocyte</dd><dt><span>111 :</span></dt><dd>Lymphocyte</dd><dt><span>112 :</span></dt><dd>Lymphocyte</dd><dt><span>113 :</span></dt><dd>Lymphocyte</dd><dt><span>114 :</span></dt><dd>Lymphocyte</dd><dt><span>115 :</span></dt><dd>Lymphocyte</dd><dt><span>116 :</span></dt><dd>Lymphocyte</dd><dt><span>117 :</span></dt><dd>Lymphocyte</dd><dt><span>118 :</span></dt><dd>Lymphocyte</dd><dt><span>119 :</span></dt><dd>Lymphocyte</dd><dt><span>120 :</span></dt><dd>Lymphocyte</dd><dt><span>121 :</span></dt><dd>Lymphocyte</dd><dt><span>122 :</span></dt><dd>Lymphocyte</dd><dt><span>123 :</span></dt><dd>Lymphocyte</dd><dt><span>124 :</span></dt><dd>Lymphocyte</dd><dt><span>125 :</span></dt><dd>Lymphocyte</dd><dt><span>126 :</span></dt><dd>Lymphocyte</dd><dt><span>127 :</span></dt><dd>Lymphocyte</dd><dt><span>128 :</span></dt><dd>Lymphocyte</dd><dt><span>129 :</span></dt><dd>Lymphocyte</dd><dt><span>130 :</span></dt><dd>Lymphocyte</dd><dt><span>131 :</span></dt><dd>Lymphocyte</dd><dt><span>132 :</span></dt><dd>Lymphocyte</dd><dt><span>133 :</span></dt><dd>Lymphocyte</dd><dt><span>134 :</span></dt><dd>Lymphocyte</dd><dt><span>135 :</span></dt><dd>Lymphocyte</dd><dt><span>136 :</span></dt><dd>Lymphocyte</dd><dt><span>137 :</span></dt><dd>Lymphocyte</dd><dt><span>138 :</span></dt><dd>Lymphocyte</dd><dt><span>139 :</span></dt><dd>Lymphocyte</dd><dt><span>140 :</span></dt><dd>Lymphocyte</dd><dt><span>141 :</span></dt><dd>Lymphocyte</dd><dt><span>142 :</span></dt><dd>Lymphocyte</dd><dt><span>143 :</span></dt><dd>Lymphocyte</dd><dt><span>144 :</span></dt><dd>Lymphocyte</dd><dt><span>145 :</span></dt><dd>Lymphocyte</dd><dt><span>146 :</span></dt><dd>Lymphocyte</dd><dt><span>147 :</span></dt><dd>Lymphocyte</dd><dt><span>148 :</span></dt><dd>Lymphocyte</dd><dt><span>149 :</span></dt><dd>Lymphocyte</dd><dt><span>150 :</span></dt><dd>Lymphocyte</dd><dt><span>151 :</span></dt><dd>Lymphocyte</dd><dt><span>152 :</span></dt><dd>Lymphocyte</dd><dt><span>153 :</span></dt><dd>Lymphocyte</dd><dt><span>154 :</span></dt><dd>Lymphocyte</dd><dt><span>155 :</span></dt><dd>Lymphocyte</dd><dt><span>156 :</span></dt><dd>Lymphocyte</dd><dt><span>157 :</span></dt><dd>Lymphocyte</dd><dt><span>158 :</span></dt><dd>Lymphocyte</dd><dt><span>159 :</span></dt><dd>Lymphocyte</dd><dt><span>160 :</span></dt><dd>Lymphocyte</dd><dt><span>161 :</span></dt><dd>Lymphocyte</dd><dt><span>162 :</span></dt><dd>Lymphocyte</dd><dt><span>163 :</span></dt><dd>Lymphocyte</dd><dt><span>164 :</span></dt><dd>Lymphocyte</dd><dt><span>165 :</span></dt><dd>Lymphocyte</dd><dt><span>166 :</span></dt><dd>Lymphocyte</dd><dt><span>167 :</span></dt><dd>Lymphocyte</dd><dt><span>168 :</span></dt><dd>Lymphocyte</dd><dt><span>169 :</span></dt><dd>Lymphocyte</dd><dt><span>170 :</span></dt><dd>Lymphocyte</dd><dt><span>171 :</span></dt><dd>Lymphocyte</dd><dt><span>172 :</span></dt><dd>Lymphocyte</dd><dt><span>173 :</span></dt><dd>Lymphocyte</dd><dt><span>174 :</span></dt><dd>Lymphocyte</dd><dt><span>175 :</span></dt><dd>Lymphocyte</dd><dt><span>176 :</span></dt><dd>Lymphocyte</dd><dt><span>177 :</span></dt><dd>Lymphocyte</dd><dt><span>178 :</span></dt><dd>Lymphocyte</dd><dt><span>179 :</span></dt><dd>Lymphocyte</dd><dt><span>180 :</span></dt><dd>Lymphocyte</dd><dt><span>181 :</span></dt><dd>Lymphocyte</dd><dt><span>182 :</span></dt><dd>Lymphocyte</dd><dt><span>183 :</span></dt><dd>Lymphocyte</dd><dt><span>184 :</span></dt><dd>Lymphocyte</dd><dt><span>185 :</span></dt><dd>Lymphocyte</dd><dt><span>186 :</span></dt><dd>Lymphocyte</dd><dt><span>187 :</span></dt><dd>Lymphocyte</dd><dt><span>188 :</span></dt><dd>Lymphocyte</dd><dt><span>189 :</span></dt><dd>Lymphocyte</dd><dt><span>190 :</span></dt><dd>Lymphocyte</dd><dt><span>191 :</span></dt><dd>Lymphocyte</dd><dt><span>192 :</span></dt><dd>Lymphocyte</dd><dt><span>193 :</span></dt><dd>Lymphocyte</dd><dt><span>194 :</span></dt><dd>Lymphocyte</dd><dt><span>195 :</span></dt><dd>Lymphocyte</dd><dt><span>196 :</span></dt><dd>Lymphocyte</dd><dt><span>197 :</span></dt><dd>Lymphocyte</dd><dt><span>198 :</span></dt><dd>Lymphocyte</dd><dt><span>199 :</span></dt><dd>Lymphocyte</dd><dt><span>200 :</span></dt><dd>Lymphocyte</dd><dt><span>201 :</span></dt><dd>Lymphocyte</dd><dt><span>202 :</span></dt><dd>Lymphocyte</dd><dt><span>203 :</span></dt><dd>Lymphocyte</dd><dt><span>204 :</span></dt><dd>Lymphocyte</dd><dt><span>205 :</span></dt><dd>Lymphocyte</dd><dt><span>206 :</span></dt><dd>Lymphocyte</dd><dt><span>207 :</span></dt><dd>Lymphocyte</dd><dt><span>208 :</span></dt><dd>Lymphocyte</dd><dt><span>209 :</span></dt><dd>Lymphocyte</dd><dt><span>210 :</span></dt><dd>Lymphocyte</dd><dt><span>211 :</span></dt><dd>Lymphocyte</dd><dt><span>212 :</span></dt><dd>Lymphocyte</dd><dt><span>213 :</span></dt><dd>Lymphocyte</dd><dt><span>214 :</span></dt><dd>Lymphocyte</dd><dt><span>215 :</span></dt><dd>Lymphocyte</dd><dt><span>216 :</span></dt><dd>Lymphocyte</dd><dt><span>217 :</span></dt><dd>Lymphocyte</dd><dt><span>218 :</span></dt><dd>Lymphocyte</dd><dt><span>219 :</span></dt><dd>Lymphocyte</dd><dt><span>220 :</span></dt><dd>Lymphocyte</dd><dt><span>221 :</span></dt><dd>Lymphocyte</dd><dt><span>222 :</span></dt><dd>Lymphocyte</dd><dt><span>223 :</span></dt><dd>Lymphocyte</dd><dt><span>224 :</span></dt><dd>Lymphocyte</dd><dt><span>225 :</span></dt><dd>Lymphocyte</dd><dt><span>226 :</span></dt><dd>Lymphocyte</dd><dt><span>227 :</span></dt><dd>Lymphocyte</dd><dt><span>228 :</span></dt><dd>Lymphocyte</dd><dt><span>229 :</span></dt><dd>Lymphocyte</dd><dt><span>230 :</span></dt><dd>Lymphocyte</dd><dt><span>231 :</span></dt><dd>Lymphocyte</dd><dt><span>232 :</span></dt><dd>Lymphocyte</dd><dt><span>233 :</span></dt><dd>Lymphocyte</dd><dt><span>234 :</span></dt><dd>Lymphocyte</dd><dt><span>235 :</span></dt><dd>Lymphocyte</dd><dt><span>236 :</span></dt><dd>Lymphocyte</dd><dt><span>237 :</span></dt><dd>Lymphocyte</dd><dt><span>238 :</span></dt><dd>Lymphocyte</dd><dt><span>239 :</span></dt><dd>Lymphocyte</dd><dt><span>240 :</span></dt><dd>Lymphocyte</dd><dt><span>241 :</span></dt><dd>Lymphocyte</dd><dt><span>242 :</span></dt><dd>Lymphocyte</dd><dt><span>243 :</span></dt><dd>Lymphocyte</dd><dt><span>244 :</span></dt><dd>Lymphocyte</dd><dt><span>245 :</span></dt><dd>Lymphocyte</dd><dt><span>246 :</span></dt><dd>Lymphocyte</dd><dt><span>247 :</span></dt><dd>Lymphocyte</dd><dt><span>248 :</span></dt><dd>Lymphocyte</dd><dt><span>249 :</span></dt><dd>Lymphocyte</dd><dt><span>250 :</span></dt><dd>Lymphocyte</dd><dt><span>251 :</span></dt><dd>Lymphocyte</dd><dt><span>252 :</span></dt><dd>Lymphocyte</dd><dt><span>253 :</span></dt><dd>Lymphocyte</dd><dt><span>254 :</span></dt><dd>Lymphocyte</dd><dt><span>255 :</span></dt><dd>Lymphocyte</dd><dt><span>256 :</span></dt><dd>Lymphocyte</dd><dt><span>257 :</span></dt><dd>Lymphocyte</dd><dt><span>258 :</span></dt><dd>Lymphocyte</dd><dt><span>259 :</span></dt><dd>Lymphocyte</dd><dt><span>260 :</span></dt><dd>Lymphocyte</dd><dt><span>261 :</span></dt><dd>Lymphocyte</dd><dt><span>262 :</span></dt><dd>Lymphocyte</dd><dt><span>263 :</span></dt><dd>Lymphocyte</dd><dt><span>264 :</span></dt><dd>Lymphocyte</dd><dt><span>265 :</span></dt><dd>Lymphocyte</dd><dt><span>266 :</span></dt><dd>Lymphocyte</dd><dt><span>267 :</span></dt><dd>Lymphocyte</dd><dt><span>268 :</span></dt><dd>Lymphocyte</dd><dt><span>269 :</span></dt><dd>Lymphocyte</dd><dt><span>270 :</span></dt><dd>Lymphocyte</dd><dt><span>271 :</span></dt><dd>Lymphocyte</dd><dt><span>272 :</span></dt><dd>Lymphocyte</dd><dt><span>273 :</span></dt><dd>Lymphocyte</dd><dt><span>274 :</span></dt><dd>Lymphocyte</dd><dt><span>275 :</span></dt><dd>Lymphocyte</dd><dt><span>276 :</span></dt><dd>Lymphocyte</dd><dt><span>277 :</span></dt><dd>Lymphocyte</dd><dt><span>278 :</span></dt><dd>Lymphocyte</dd><dt><span>279 :</span></dt><dd>Lymphocyte</dd><dt><span>280 :</span></dt><dd>Lymphocyte</dd><dt><span>281 :</span></dt><dd>Lymphocyte</dd><dt><span>282 :</span></dt><dd>Lymphocyte</dd><dt><span>283 :</span></dt><dd>Lymphocyte</dd><dt><span>284 :</span></dt><dd>Lymphocyte</dd><dt><span>285 :</span></dt><dd>Lymphocyte</dd><dt><span>286 :</span></dt><dd>Lymphocyte</dd><dt><span>287 :</span></dt><dd>Lymphocyte</dd><dt><span>288 :</span></dt><dd>Lymphocyte</dd><dt><span>289 :</span></dt><dd>Lymphocyte</dd><dt><span>290 :</span></dt><dd>Lymphocyte</dd><dt><span>291 :</span></dt><dd>Lymphocyte</dd><dt><span>292 :</span></dt><dd>Lymphocyte</dd><dt><span>293 :</span></dt><dd>Lymphocyte</dd><dt><span>294 :</span></dt><dd>Lymphocyte</dd><dt><span>295 :</span></dt><dd>Lymphocyte</dd><dt><span>296 :</span></dt><dd>Lymphocyte</dd><dt><span>297 :</span></dt><dd>Lymphocyte</dd><dt><span>298 :</span></dt><dd>Lymphocyte</dd><dt><span>299 :</span></dt><dd>Lymphocyte</dd><dt><span>300 :</span></dt><dd>Lymphocyte</dd><dt><span>301 :</span></dt><dd>Lymphocyte</dd><dt><span>302 :</span></dt><dd>Lymphocyte</dd><dt><span>303 :</span></dt><dd>Lymphocyte</dd><dt><span>304 :</span></dt><dd>Lymphocyte</dd><dt><span>305 :</span></dt><dd>Lymphocyte</dd><dt><span>306 :</span></dt><dd>Lymphocyte</dd></dl></div><div class='xr-var-data'><pre>array([[  0,  11,  11, ...,  25,  25,   0],
       [ 11,  11,  11, ...,  25,  25,  25],
       [ 11,  11,  11, ...,  25,  25,  25],
       ...,
       [306, 306, 306, ..., 301, 301, 301],
       [306, 306, 306, ..., 301, 301, 301],
       [  0, 306, 306, ..., 301, 301, 301]], dtype=uint16)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_obs</span></div><div class='xr-var-dims'>(cells, features)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 1.01e+03 ... 1.004e+03</div><input id='attrs-56e122c5-b102-4a53-b61b-f08cefd611cb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-56e122c5-b102-4a53-b61b-f08cefd611cb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a4c426f3-a69f-4ab9-8843-afac349a9c5d' class='xr-var-data-in' type='checkbox'><label for='data-a4c426f3-a69f-4ab9-8843-afac349a9c5d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.00000000e+00, 1.01018584e+03, 1.22326844e+03],
       [1.00000000e+00, 1.03908571e+03, 1.01120902e+03],
       [1.00000000e+00, 1.05324138e+03, 1.13629310e+03],
       [1.00000000e+00, 1.14608904e+03, 1.01020890e+03],
       [1.00000000e+00, 1.20315838e+03, 1.21448435e+03],
       [3.00000000e+00, 1.06540000e+03, 1.19944557e+03],
       [3.00000000e+00, 1.10433954e+03, 1.12641822e+03],
       [3.00000000e+00, 1.18720401e+03, 1.28950273e+03],
       [3.00000000e+00, 1.27812066e+03, 1.27252489e+03],
       [3.00000000e+00, 1.29039405e+03, 1.16076883e+03],
       [2.00000000e+00, 1.00585915e+03, 1.01160915e+03],
       [2.00000000e+00, 1.00917359e+03, 1.03397311e+03],
       [2.00000000e+00, 1.00324348e+03, 1.05176522e+03],
       [2.00000000e+00, 1.00357143e+03, 1.06416883e+03],
       [2.00000000e+00, 1.00718725e+03, 1.08812749e+03],
       [2.00000000e+00, 1.00568354e+03, 1.10298734e+03],
       [2.00000000e+00, 1.00335417e+03, 1.12005208e+03],
       [2.00000000e+00, 1.00539412e+03, 1.13217059e+03],
       [2.00000000e+00, 1.00819919e+03, 1.14721545e+03],
       [2.00000000e+00, 1.00741176e+03, 1.16445675e+03],
...
       [2.00000000e+00, 1.27900708e+03, 1.01281132e+03],
       [2.00000000e+00, 1.28190556e+03, 1.08851667e+03],
       [2.00000000e+00, 1.27786722e+03, 1.14213693e+03],
       [2.00000000e+00, 1.28010169e+03, 1.03024153e+03],
       [2.00000000e+00, 1.28237278e+03, 1.29520710e+03],
       [2.00000000e+00, 1.28770258e+03, 1.12117096e+03],
       [2.00000000e+00, 1.28907051e+03, 1.04027564e+03],
       [2.00000000e+00, 1.29139677e+03, 1.19800645e+03],
       [2.00000000e+00, 1.29166667e+03, 1.23681356e+03],
       [2.00000000e+00, 1.29221667e+03, 1.21524000e+03],
       [2.00000000e+00, 1.29254386e+03, 1.13667719e+03],
       [2.00000000e+00, 1.29116022e+03, 1.00887293e+03],
       [2.00000000e+00, 1.29291554e+03, 1.05628378e+03],
       [2.00000000e+00, 1.29352045e+03, 1.09660223e+03],
       [2.00000000e+00, 1.29506867e+03, 1.28971245e+03],
       [2.00000000e+00, 1.29537234e+03, 1.07433511e+03],
       [2.00000000e+00, 1.29553226e+03, 1.25187903e+03],
       [2.00000000e+00, 1.29627097e+03, 1.26741290e+03],
       [2.00000000e+00, 1.29565152e+03, 1.18290909e+03],
       [2.00000000e+00, 1.29696923e+03, 1.00386154e+03]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>_segmentation</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 11 11 11 11 ... 301 301 301 301</div><input id='attrs-5e91b035-bf75-4b13-b38f-100c69ce24bb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5e91b035-bf75-4b13-b38f-100c69ce24bb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0554f4eb-f58b-4c3a-a028-0ffac838262c' class='xr-var-data-in' type='checkbox'><label for='data-0554f4eb-f58b-4c3a-a028-0ffac838262c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[  0,  11,  11, ...,  25,  25,   0],
       [ 11,  11,  11, ...,  25,  25,  25],
       [ 11,  11,  11, ...,  25,  25,  25],
       ...,
       [306, 306, 306, ..., 301, 301, 301],
       [306, 306, 306, ..., 301, 301, 301],
       [  0, 306, 306, ..., 301, 301, 301]], dtype=uint16)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-99cffb34-3e1c-48b5-8cb3-c5b4b75ec6be' class='xr-section-summary-in' type='checkbox'  ><label for='section-99cffb34-3e1c-48b5-8cb3-c5b4b75ec6be' class='xr-section-summary' >Indexes: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>labels</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-83c2d08c-c3ac-494c-9b1c-1f48f613388f' class='xr-index-data-in' type='checkbox'/><label for='index-83c2d08c-c3ac-494c-9b1c-1f48f613388f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1, 2, 3], dtype=&#x27;int64&#x27;, name=&#x27;labels&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>la_props</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-dbfc2c0d-cec2-4d73-9171-811e5156d46c' class='xr-index-data-in' type='checkbox'/><label for='index-dbfc2c0d-cec2-4d73-9171-811e5156d46c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;_color&#x27;, &#x27;_name&#x27;], dtype=&#x27;object&#x27;, name=&#x27;la_props&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>channels</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-46c636ee-0dd9-465a-9134-de45cea01751' class='xr-index-data-in' type='checkbox'/><label for='index-46c636ee-0dd9-465a-9134-de45cea01751' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;CD11c&#x27;, &#x27;CD68&#x27;, &#x27;DAPI&#x27;], dtype=&#x27;object&#x27;, name=&#x27;channels&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-cfa845c9-75b7-4ea6-b4e4-4d91d57f2cf4' class='xr-index-data-in' type='checkbox'/><label for='index-cfa845c9-75b7-4ea6-b4e4-4d91d57f2cf4' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c14df3c8-81b5-4550-84c8-de6f52d6746e' class='xr-index-data-in' type='checkbox'/><label for='index-c14df3c8-81b5-4550-84c8-de6f52d6746e' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>cells</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-cd91f06e-e9e4-4d5f-8c3e-148b4192f900' class='xr-index-data-in' type='checkbox'/><label for='index-cd91f06e-e9e4-4d5f-8c3e-148b4192f900' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,
       ...
       297, 298, 299, 300, 301, 302, 303, 304, 305, 306],
      dtype=&#x27;int64&#x27;, name=&#x27;cells&#x27;, length=306))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>features</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-2fa63c92-e9e1-4d98-86b8-56e0bdedc63b' class='xr-index-data-in' type='checkbox'/><label for='index-2fa63c92-e9e1-4d98-86b8-56e0bdedc63b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;_labels&#x27;, &#x27;centroid-0&#x27;, &#x27;centroid-1&#x27;], dtype=&#x27;object&#x27;, name=&#x27;features&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-88334d18-e5c1-42ed-83ed-fdf8f2da20e2' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-88334d18-e5c1-42ed-83ed-fdf8f2da20e2' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># adding colors to match the channel colors</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;deepskyblue&quot;</span><span class="p">,</span> <span class="s2">&quot;darkred&quot;</span><span class="p">]</span>
<span class="n">ds_cellpose_merged</span> <span class="o">=</span> <span class="n">ds_cellpose_merged</span><span class="o">.</span><span class="n">la</span><span class="o">.</span><span class="n">set_label_colors</span><span class="p">([</span><span class="s2">&quot;Lymphocyte&quot;</span><span class="p">,</span> <span class="s2">&quot;Dendritic Cell&quot;</span><span class="p">,</span> <span class="s2">&quot;Macrophage&quot;</span><span class="p">],</span> <span class="n">colors</span><span class="p">)</span>

<span class="c1"># merged masks</span>
<span class="n">_</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">ds_cellpose_merged</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;CD11c&quot;</span><span class="p">,</span> <span class="s2">&quot;CD68&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_cellpose_merged</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span>
    <span class="n">render_image</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">render_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">legend_label</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_26_0.png" src="../_images/notebooks_Segmentation_26_0.png" />
</div>
</div>
</section>
<section id="Fine-Tuning-Cellpose">
<h2>Fine-Tuning Cellpose<a class="headerlink" href="#Fine-Tuning-Cellpose" title="Link to this heading">#</a></h2>
<p>Cellpose often benefits from fine-tuning, which is detailed in their <a class="reference external" href="https://cellpose.readthedocs.io/en/latest/gui.html#training-your-own-cellpose-model">documentation</a>. You can load fine-tuned cellpose models into <code class="docutils literal notranslate"><span class="pre">spatialproteomics</span></code> by using <code class="docutils literal notranslate"><span class="pre">ds.tl.cellpose(channel=&quot;your_marker&quot;,</span> <span class="pre">pretrained_model=model_path)</span></code>.</p>
</section>
<section id="Merging-Segmentation-Masks-from-Different-Layers">
<h2>Merging Segmentation Masks from Different Layers<a class="headerlink" href="#Merging-Segmentation-Masks-from-Different-Layers" title="Link to this heading">#</a></h2>
<p>In the previous section, we looked at how to merge masks from a single layer. But what do we do if we have multiple segmentations in different layers?</p>
<p>Let us consider an example. Mesmer always requires two channels to segment an image (a nuclear and a membrane stain). We can run mesmer on our membrane stain, and then run cellpose on the macrophages and dendritic cells. However, now our segmentation masks are stored in different layers. The good thing is, we can combine them just as easily by using <code class="docutils literal notranslate"><span class="pre">pp.merge_segmentation()</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># running mesmer and cellpose to obtain a bunch of different segmentation masks</span>
<span class="c1"># these are stored in the layers dapi_seg, macro_seg, and dendritic_seg</span>
<span class="n">ds_mesmer</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">mesmer</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;Na/K ATPase&quot;</span><span class="p">],</span> <span class="n">key_added</span><span class="o">=</span><span class="s2">&quot;dapi_seg&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">cellpose</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;CD68&quot;</span><span class="p">,</span> <span class="n">key_added</span><span class="o">=</span><span class="s2">&quot;macro_seg&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">cellpose</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;CD11c&quot;</span><span class="p">,</span> <span class="n">key_added</span><span class="o">=</span><span class="s2">&quot;dendritic_seg&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ds_mesmer</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Checking for cached data
Checking MultiplexSegmentation-9.tar.gz against provided file_hash...
MultiplexSegmentation-9.tar.gz with hash a1dfbce2594f927b9112f23a0a1739e0 already available.
Extracting /home/meyerben/.deepcell/models/MultiplexSegmentation-9.tar.gz
Successfully extracted /home/meyerben/.deepcell/models/MultiplexSegmentation-9.tar.gz into /home/meyerben/.deepcell/models
No training configuration found in save file, so the model was *not* compiled. Compile it manually.
Converting image dtype to float
Neither TORCH CUDA nor MPS version not installed/working.
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; loading model /home/meyerben/.cellpose/models/cpsam
Neither TORCH CUDA nor MPS version not installed/working.
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; using CPU
&gt;&gt;&gt;&gt; loading model /home/meyerben/.cellpose/models/cpsam
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 1MB
Dimensions:        (channels: 4, y: 301, x: 301)
Coordinates:
  * channels       (channels) &lt;U11 176B &#x27;DAPI&#x27; &#x27;Na/K ATPase&#x27; &#x27;CD68&#x27; &#x27;CD11c&#x27;
  * x              (x) int64 2kB 1000 1001 1002 1003 ... 1297 1298 1299 1300
  * y              (y) int64 2kB 1000 1001 1002 1003 ... 1297 1298 1299 1300
Data variables:
    _image         (channels, y, x) uint8 362kB dask.array&lt;chunksize=(4, 301, 301), meta=np.ndarray&gt;
    dapi_seg       (y, x) int64 725kB 11 11 11 11 11 11 ... 344 344 344 344 344
    macro_seg      (y, x) uint16 181kB 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0
    dendritic_seg  (y, x) uint16 181kB 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-8a62679f-3373-4cd7-9d03-4fcf1e521140' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-8a62679f-3373-4cd7-9d03-4fcf1e521140' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>channels</span>: 4</li><li><span class='xr-has-index'>y</span>: 301</li><li><span class='xr-has-index'>x</span>: 301</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-74d191fd-a1a8-41f9-bf31-babc1b7deb06' class='xr-section-summary-in' type='checkbox'  checked><label for='section-74d191fd-a1a8-41f9-bf31-babc1b7deb06' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>channels</span></div><div class='xr-var-dims'>(channels)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>&#x27;DAPI&#x27; &#x27;Na/K ATPase&#x27; &#x27;CD68&#x27; &#x27;CD11c&#x27;</div><input id='attrs-16d27ff5-49fe-4cdc-b70e-34c8d554deab' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-16d27ff5-49fe-4cdc-b70e-34c8d554deab' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5e5b4ca8-c95d-4f3f-8154-a3bb1935b008' class='xr-var-data-in' type='checkbox'><label for='data-5e5b4ca8-c95d-4f3f-8154-a3bb1935b008' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;DAPI&#x27;, &#x27;Na/K ATPase&#x27;, &#x27;CD68&#x27;, &#x27;CD11c&#x27;], dtype=&#x27;&lt;U11&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-9b1e4697-96de-4630-bf38-0d96ce818f20' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9b1e4697-96de-4630-bf38-0d96ce818f20' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6e2fa3ee-dbdc-44a3-8865-f3b117a15cc5' class='xr-var-data-in' type='checkbox'><label for='data-6e2fa3ee-dbdc-44a3-8865-f3b117a15cc5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1000 1001 1002 ... 1298 1299 1300</div><input id='attrs-5b8990c3-7125-492a-96b7-4cf31046babc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5b8990c3-7125-492a-96b7-4cf31046babc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6617c944-d70f-4cbe-8899-2d2f29529c1c' class='xr-var-data-in' type='checkbox'><label for='data-6617c944-d70f-4cbe-8899-2d2f29529c1c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1000, 1001, 1002, ..., 1298, 1299, 1300])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0e8b8564-5f3e-4cc2-9d36-652308f0821e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0e8b8564-5f3e-4cc2-9d36-652308f0821e' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>_image</span></div><div class='xr-var-dims'>(channels, y, x)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4, 301, 301), meta=np.ndarray&gt;</div><input id='attrs-708527e4-1e06-4946-9d27-d24265840b20' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-708527e4-1e06-4946-9d27-d24265840b20' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-792a5695-5e21-4979-a6af-634f5a58ffbe' class='xr-var-data-in' type='checkbox'><label for='data-792a5695-5e21-4979-a6af-634f5a58ffbe' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 353.91 kiB </td>
                        <td> 353.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4, 301, 301) </td>
                        <td> (4, 301, 301) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 1 chunks in 3 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> uint8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="195" height="185" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="25" y2="15" style="stroke-width:2" />
  <line x1="10" y1="120" x2="25" y2="135" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2" />
  <line x1="25" y1="15" x2="25" y2="135" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 25.77971986703342,15.779719867033421 25.77971986703342,135.7797198670334 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="25" y1="15" x2="145" y2="15" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="25" y2="15" style="stroke-width:2" />
  <line x1="130" y1="0" x2="145" y2="15" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 145.7797198670334,15.779719867033421 25.77971986703342,15.779719867033421" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="25" y1="15" x2="145" y2="15" style="stroke-width:2" />
  <line x1="25" y1="135" x2="145" y2="135" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="25" y1="15" x2="25" y2="135" style="stroke-width:2" />
  <line x1="145" y1="15" x2="145" y2="135" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="25.77971986703342,15.779719867033421 145.7797198670334,15.779719867033421 145.7797198670334,135.7797198670334 25.77971986703342,135.7797198670334" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="85.779720" y="155.779720" font-size="1.0rem" font-weight="100" text-anchor="middle" >301</text>
  <text x="165.779720" y="75.779720" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,165.779720,75.779720)">301</text>
  <text x="7.889860" y="147.889860" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,7.889860,147.889860)">4</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dapi_seg</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>11 11 11 11 11 ... 344 344 344 344</div><input id='attrs-57ca74c5-b261-47fa-83dd-9d65722aac60' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-57ca74c5-b261-47fa-83dd-9d65722aac60' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-63e62f90-a483-48e6-8e17-03d868c4257f' class='xr-var-data-in' type='checkbox'><label for='data-63e62f90-a483-48e6-8e17-03d868c4257f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 11,  11,  11, ...,   0,   0,   0],
       [ 11,  11,  11, ...,   8,   8,   8],
       [ 11,  11,  11, ...,   8,   8,   8],
       ...,
       [350, 350, 350, ..., 344, 344, 344],
       [350, 350, 350, ..., 344, 344, 344],
       [350, 350, 350, ..., 344, 344, 344]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>macro_seg</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0</div><input id='attrs-4a7df719-ec49-4296-ab1a-b6314a3b1e3f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4a7df719-ec49-4296-ab1a-b6314a3b1e3f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bcd60773-03d9-412f-8036-d266f6bcf22b' class='xr-var-data-in' type='checkbox'><label for='data-bcd60773-03d9-412f-8036-d266f6bcf22b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       ...,
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], dtype=uint16)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dendritic_seg</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>uint16</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0</div><input id='attrs-1ebedef3-a015-44bd-aa27-bd5fe80a7a95' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1ebedef3-a015-44bd-aa27-bd5fe80a7a95' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-04a78cf0-d90c-46f6-a2b7-a1e51562ebf6' class='xr-var-data-in' type='checkbox'><label for='data-04a78cf0-d90c-46f6-a2b7-a1e51562ebf6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       ...,
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], dtype=uint16)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-396a783a-61ac-437c-82f5-afecc2badea2' class='xr-section-summary-in' type='checkbox'  ><label for='section-396a783a-61ac-437c-82f5-afecc2badea2' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>channels</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-14191231-c8de-4e6f-a5cd-79a5437893c2' class='xr-index-data-in' type='checkbox'/><label for='index-14191231-c8de-4e6f-a5cd-79a5437893c2' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;DAPI&#x27;, &#x27;Na/K ATPase&#x27;, &#x27;CD68&#x27;, &#x27;CD11c&#x27;], dtype=&#x27;object&#x27;, name=&#x27;channels&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-5cde510f-aefa-4605-96d7-0ad5faff65bd' class='xr-index-data-in' type='checkbox'/><label for='index-5cde510f-aefa-4605-96d7-0ad5faff65bd' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;, length=301))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-0c71f234-4f40-4bca-9bbf-7445a7871a16' class='xr-index-data-in' type='checkbox'/><label for='index-0c71f234-4f40-4bca-9bbf-7445a7871a16' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009,
       ...
       1291, 1292, 1293, 1294, 1295, 1296, 1297, 1298, 1299, 1300],
      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;, length=301))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-69b590c0-eeb0-4f0e-929f-cd3d4cd69f5b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-69b590c0-eeb0-4f0e-929f-cd3d4cd69f5b' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plotting the individual masks</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;Na/K ATPase&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">([</span><span class="s2">&quot;gold&quot;</span><span class="p">,</span> <span class="s2">&quot;deepskyblue&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">segmentation_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;layer_key&quot;</span><span class="p">:</span> <span class="s2">&quot;dapi_seg&quot;</span><span class="p">},</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="p">)</span>

<span class="n">_</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;CD68&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">([</span><span class="s2">&quot;gold&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">segmentation_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;layer_key&quot;</span><span class="p">:</span> <span class="s2">&quot;macro_seg&quot;</span><span class="p">},</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="p">)</span>

<span class="n">_</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;CD11c&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">([</span><span class="s2">&quot;gold&quot;</span><span class="p">,</span> <span class="s2">&quot;deepskyblue&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">segmentation_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;layer_key&quot;</span><span class="p">:</span> <span class="s2">&quot;dendritic_seg&quot;</span><span class="p">},</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_30_0.png" src="../_images/notebooks_Segmentation_30_0.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># merging the segmentation masks and making the merged segmentation the default one</span>
<span class="n">ds_mesmer</span> <span class="o">=</span> <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">merge_segmentation</span><span class="p">(</span>
    <span class="n">layer_key</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dendritic_seg&quot;</span><span class="p">,</span> <span class="s2">&quot;macro_seg&quot;</span><span class="p">,</span> <span class="s2">&quot;dapi_seg&quot;</span><span class="p">],</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Dendritic Cell&quot;</span><span class="p">,</span> <span class="s2">&quot;Macrophage&quot;</span><span class="p">,</span> <span class="s2">&quot;Lymphocyte&quot;</span><span class="p">],</span>
    <span class="n">threshold</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">pp</span><span class="o">.</span><span class="n">add_segmentation</span><span class="p">(</span><span class="s2">&quot;_merged_segmentation&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># adding colors to match the channel colors</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;deepskyblue&quot;</span><span class="p">,</span> <span class="s2">&quot;darkred&quot;</span><span class="p">]</span>
<span class="n">ds_mesmer</span> <span class="o">=</span> <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">la</span><span class="o">.</span><span class="n">set_label_colors</span><span class="p">([</span><span class="s2">&quot;Lymphocyte&quot;</span><span class="p">,</span> <span class="s2">&quot;Dendritic Cell&quot;</span><span class="p">,</span> <span class="s2">&quot;Macrophage&quot;</span><span class="p">],</span> <span class="n">colors</span><span class="p">)</span>

<span class="c1"># merged masks</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">pp</span><span class="p">[[</span><span class="s2">&quot;DAPI&quot;</span><span class="p">,</span> <span class="s2">&quot;CD11c&quot;</span><span class="p">,</span> <span class="s2">&quot;CD68&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ds_mesmer</span><span class="o">.</span><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">render_image</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">render_segmentation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">render_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">legend_label</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Segmentation_32_0.png" src="../_images/notebooks_Segmentation_32_0.png" />
</div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Plotting.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Plotting</p>
      </div>
    </a>
    <a class="right-next"
       href="ImageProcessing.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Image Processing</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Whole-Cell-Segmentation-with-Cellpose">Whole-Cell Segmentation with Cellpose</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Whole-Cell-Segmentation-with-Mesmer">Whole-Cell Segmentation with Mesmer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Nuclear-Segmentation-with-StarDist">Nuclear Segmentation with StarDist</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Segmenting-Multiple-Channels-with-Cellpose">Segmenting Multiple Channels with Cellpose</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Fine-Tuning-Cellpose">Fine-Tuning Cellpose</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Merging-Segmentation-Masks-from-Different-Layers">Merging Segmentation Masks from Different Layers</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Matthias Meyer-Bender, Harald Vohringer
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Matthias Meyer-Bender, Harald Vohringer.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>